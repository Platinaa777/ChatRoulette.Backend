{"ast":null,"code":"'use strict';\n\nvar isNonArrayObject = require('./').isNonArrayObject;\nvar _a = require('./constants'),\n  E = _a.typeErrors,\n  clientTrackSwitchOffControl = _a.clientTrackSwitchOffControl,\n  videoContentPreferencesMode = _a.videoContentPreferencesMode,\n  subscriptionMode = _a.subscriptionMode,\n  trackPriority = _a.trackPriority,\n  trackSwitchOffMode = _a.trackSwitchOffMode;\n/**\n * Validate the {@link BandwidthProfileOptions} object.\n * @param {BandwidthProfileOptions} bandwidthProfile\n * @returns {?Error} - null if valid, Error if not.\n */\nfunction validateBandwidthProfile(bandwidthProfile) {\n  var error = validateObject(bandwidthProfile, 'options.bandwidthProfile');\n  if (!bandwidthProfile || error) {\n    return error;\n  }\n  error = validateObject(bandwidthProfile.video, 'options.bandwidthProfile.video', [{\n    prop: 'contentPreferencesMode',\n    values: Object.values(videoContentPreferencesMode)\n  }, {\n    prop: 'dominantSpeakerPriority',\n    values: Object.values(trackPriority)\n  }, {\n    prop: 'maxSubscriptionBitrate',\n    type: 'number'\n  }, {\n    prop: 'maxTracks',\n    type: 'number'\n  }, {\n    prop: 'mode',\n    values: Object.values(subscriptionMode)\n  }, {\n    prop: 'clientTrackSwitchOffControl',\n    values: Object.values(clientTrackSwitchOffControl)\n  }, {\n    prop: 'trackSwitchOffMode',\n    values: Object.values(trackSwitchOffMode)\n  }]);\n  if (error) {\n    return error;\n  }\n  if (bandwidthProfile.video) {\n    // maxTracks is replaced by clientTrackSwitchOffControl.\n    // throw an error if both are specified.\n    if ('maxTracks' in bandwidthProfile.video && 'clientTrackSwitchOffControl' in bandwidthProfile.video) {\n      return new TypeError('options.bandwidthProfile.video.maxTracks is deprecated. Use options.bandwidthProfile.video.clientTrackSwitchOffControl instead.');\n    }\n    // renderDimensions is replaced by contentPreferencesMode.\n    // throw an error if both are specified.\n    if ('renderDimensions' in bandwidthProfile.video && 'contentPreferencesMode' in bandwidthProfile.video) {\n      return new TypeError('options.bandwidthProfile.video.renderDimensions is deprecated. Use options.bandwidthProfile.video.contentPreferencesMode instead.');\n    }\n    return validateRenderDimensions(bandwidthProfile.video.renderDimensions);\n  }\n  return null;\n}\n/**\n * Throw if the given track is not a {@link LocalAudioTrack}, a\n * {@link LocalVideoTrack} or a MediaStreamTrack.\n * @param {*} track\n * @param {object} options\n */\nfunction validateLocalTrack(track, options) {\n  if (!(track instanceof options.LocalAudioTrack || track instanceof options.LocalDataTrack || track instanceof options.LocalVideoTrack || track instanceof options.MediaStreamTrack)) {\n    /* eslint new-cap:0 */\n    throw E.INVALID_TYPE('track', 'LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack');\n  }\n}\n/**\n * Validate an object. An object is valid if it is undefined or a non-null, non-array\n * object whose properties satisfy the specified data-type or value-range requirements.\n * @param {object} object - the object to be validated\n * @param {string} name - the object name to be used to build the error message, if invalid\n * @param {Array<object>} [propChecks] - optional data-type or value-range requirements\n *   for the object's properties\n * @returns {?Error} - null if object is valid, Error if not\n */\nfunction validateObject(object, name, propChecks) {\n  if (propChecks === void 0) {\n    propChecks = [];\n  }\n  // NOTE(mmalavalli): We determine that an undefined object is valid because this\n  // means the parent object does not contain this object as a property, which is\n  // a valid scenario.\n  if (typeof object === 'undefined') {\n    return null;\n  }\n  // NOTE(mmalavalli): We determine that if the object is null, or an Array, or\n  // any other non-object type, then it is invalid.\n  if (object === null || !isNonArrayObject(object)) {\n    return E.INVALID_TYPE(name, 'object');\n  }\n  // NOTE(mmalavalli): We determine that the object is invalid if at least one of\n  // its properties does not satisfy its data-type or value-range requirement.\n  return propChecks.reduce(function (error, _a) {\n    var prop = _a.prop,\n      type = _a.type,\n      values = _a.values;\n    if (error || !(prop in object)) {\n      return error;\n    }\n    var value = object[prop];\n    if (type && typeof value !== type) {\n      return E.INVALID_TYPE(name + \".\" + prop, type);\n    }\n    if (type === 'number' && isNaN(value)) {\n      return E.INVALID_TYPE(name + \".\" + prop, type);\n    }\n    if (Array.isArray(values) && !values.includes(value)) {\n      return E.INVALID_VALUE(name + \".\" + prop, values);\n    }\n    return error;\n  }, null);\n}\n/**\n * Validates the renderDimensions field to be \"auto\" or {@link VideoRenderDimensions} object.\n * @param {string|VideoRenderDimensions} renderDimensions\n * @returns {?Error} - null if valid, Error if not.\n */\nfunction validateRenderDimensions(renderDimensions) {\n  var name = 'options.bandwidthProfile.video.renderDimensions';\n  var error = validateObject(renderDimensions, name);\n  return renderDimensions ? error || Object.values(trackPriority).reduce(function (error, prop) {\n    return error || validateObject(renderDimensions[prop], name + \".\" + prop, [{\n      prop: 'height',\n      type: 'number'\n    }, {\n      prop: 'width',\n      type: 'number'\n    }]);\n  }, null) : error;\n}\nexports.validateBandwidthProfile = validateBandwidthProfile;\nexports.validateLocalTrack = validateLocalTrack;\nexports.validateObject = validateObject;","map":{"version":3,"names":["isNonArrayObject","require","_a","E","typeErrors","clientTrackSwitchOffControl","videoContentPreferencesMode","subscriptionMode","trackPriority","trackSwitchOffMode","validateBandwidthProfile","bandwidthProfile","error","validateObject","video","prop","values","Object","type","TypeError","validateRenderDimensions","renderDimensions","validateLocalTrack","track","options","LocalAudioTrack","LocalDataTrack","LocalVideoTrack","MediaStreamTrack","INVALID_TYPE","object","name","propChecks","reduce","value","isNaN","Array","isArray","includes","INVALID_VALUE","exports"],"sources":["/home/denis/RiderProjects/ChatRoulette/WebUI/chat-app/node_modules/twilio-video/lib/util/validate.js"],"sourcesContent":["'use strict';\n\nconst { isNonArrayObject } = require('./');\nconst { typeErrors: E, clientTrackSwitchOffControl, videoContentPreferencesMode, subscriptionMode, trackPriority, trackSwitchOffMode } = require('./constants');\n\n/**\n * Validate the {@link BandwidthProfileOptions} object.\n * @param {BandwidthProfileOptions} bandwidthProfile\n * @returns {?Error} - null if valid, Error if not.\n */\nfunction validateBandwidthProfile(bandwidthProfile) {\n  let error = validateObject(bandwidthProfile, 'options.bandwidthProfile');\n  if (!bandwidthProfile || error) {\n    return error;\n  }\n  error = validateObject(bandwidthProfile.video, 'options.bandwidthProfile.video', [\n    { prop: 'contentPreferencesMode', values: Object.values(videoContentPreferencesMode) },\n    { prop: 'dominantSpeakerPriority', values: Object.values(trackPriority) },\n    { prop: 'maxSubscriptionBitrate', type: 'number' },\n    { prop: 'maxTracks', type: 'number' },\n    { prop: 'mode', values: Object.values(subscriptionMode) },\n    { prop: 'clientTrackSwitchOffControl', values: Object.values(clientTrackSwitchOffControl) },\n    { prop: 'trackSwitchOffMode', values: Object.values(trackSwitchOffMode) }\n  ]);\n\n  if (error) {\n    return error;\n  }\n\n  if (bandwidthProfile.video) {\n\n    // maxTracks is replaced by clientTrackSwitchOffControl.\n    // throw an error if both are specified.\n    if ('maxTracks' in bandwidthProfile.video && 'clientTrackSwitchOffControl' in bandwidthProfile.video) {\n      return new TypeError('options.bandwidthProfile.video.maxTracks is deprecated. Use options.bandwidthProfile.video.clientTrackSwitchOffControl instead.');\n    }\n\n    // renderDimensions is replaced by contentPreferencesMode.\n    // throw an error if both are specified.\n    if ('renderDimensions' in bandwidthProfile.video && 'contentPreferencesMode' in bandwidthProfile.video) {\n      return new TypeError('options.bandwidthProfile.video.renderDimensions is deprecated. Use options.bandwidthProfile.video.contentPreferencesMode instead.');\n    }\n\n    return validateRenderDimensions(bandwidthProfile.video.renderDimensions);\n  }\n\n  return null;\n}\n\n/**\n * Throw if the given track is not a {@link LocalAudioTrack}, a\n * {@link LocalVideoTrack} or a MediaStreamTrack.\n * @param {*} track\n * @param {object} options\n */\nfunction validateLocalTrack(track, options) {\n  if (!(track instanceof options.LocalAudioTrack\n    || track instanceof options.LocalDataTrack\n    || track instanceof options.LocalVideoTrack\n    || track instanceof options.MediaStreamTrack)) {\n    /* eslint new-cap:0 */\n    throw E.INVALID_TYPE('track', 'LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack');\n  }\n}\n\n/**\n * Validate an object. An object is valid if it is undefined or a non-null, non-array\n * object whose properties satisfy the specified data-type or value-range requirements.\n * @param {object} object - the object to be validated\n * @param {string} name - the object name to be used to build the error message, if invalid\n * @param {Array<object>} [propChecks] - optional data-type or value-range requirements\n *   for the object's properties\n * @returns {?Error} - null if object is valid, Error if not\n */\nfunction validateObject(object, name, propChecks = []) {\n  // NOTE(mmalavalli): We determine that an undefined object is valid because this\n  // means the parent object does not contain this object as a property, which is\n  // a valid scenario.\n  if (typeof object === 'undefined') {\n    return null;\n  }\n  // NOTE(mmalavalli): We determine that if the object is null, or an Array, or\n  // any other non-object type, then it is invalid.\n  if (object === null || !isNonArrayObject(object)) {\n    return E.INVALID_TYPE(name, 'object');\n  }\n  // NOTE(mmalavalli): We determine that the object is invalid if at least one of\n  // its properties does not satisfy its data-type or value-range requirement.\n  return propChecks.reduce((error, { prop, type, values }) => {\n    if (error || !(prop in object)) {\n      return error;\n    }\n    const value = object[prop];\n    if (type && typeof value !== type) {\n      return E.INVALID_TYPE(`${name}.${prop}`, type);\n    }\n    if (type === 'number' && isNaN(value)) {\n      return E.INVALID_TYPE(`${name}.${prop}`, type);\n    }\n    if (Array.isArray(values) && !values.includes(value)) {\n      return E.INVALID_VALUE(`${name}.${prop}`, values);\n    }\n    return error;\n  }, null);\n}\n\n/**\n * Validates the renderDimensions field to be \"auto\" or {@link VideoRenderDimensions} object.\n * @param {string|VideoRenderDimensions} renderDimensions\n * @returns {?Error} - null if valid, Error if not.\n */\nfunction validateRenderDimensions(renderDimensions) {\n  const name = 'options.bandwidthProfile.video.renderDimensions';\n  let error = validateObject(renderDimensions, name);\n  return renderDimensions ? error || Object.values(trackPriority).reduce((error, prop) => {\n    return error || validateObject(renderDimensions[prop], `${name}.${prop}`, [\n      { prop: 'height', type: 'number' },\n      { prop: 'width', type: 'number' }\n    ]);\n  }, null) : error;\n}\n\nexports.validateBandwidthProfile = validateBandwidthProfile;\nexports.validateLocalTrack = validateLocalTrack;\nexports.validateObject = validateObject;\n"],"mappings":"AAAA,YAAY;;AAEJ,IAAAA,gBAAgB,GAAKC,OAAO,CAAC,IAAI,CAAC,CAAAD,gBAAlB;AAClB,IAAAE,EAAA,GAAmID,OAAO,CAAC,aAAa,CAAC;EAA3IE,CAAC,GAAAD,EAAA,CAAAE,UAAA;EAAEC,2BAA2B,GAAAH,EAAA,CAAAG,2BAAA;EAAEC,2BAA2B,GAAAJ,EAAA,CAAAI,2BAAA;EAAEC,gBAAgB,GAAAL,EAAA,CAAAK,gBAAA;EAAEC,aAAa,GAAAN,EAAA,CAAAM,aAAA;EAAEC,kBAAkB,GAAAP,EAAA,CAAAO,kBAA2B;AAE/J;;;;;AAKA,SAASC,wBAAwBA,CAACC,gBAAgB;EAChD,IAAIC,KAAK,GAAGC,cAAc,CAACF,gBAAgB,EAAE,0BAA0B,CAAC;EACxE,IAAI,CAACA,gBAAgB,IAAIC,KAAK,EAAE;IAC9B,OAAOA,KAAK;;EAEdA,KAAK,GAAGC,cAAc,CAACF,gBAAgB,CAACG,KAAK,EAAE,gCAAgC,EAAE,CAC/E;IAAEC,IAAI,EAAE,wBAAwB;IAAEC,MAAM,EAAEC,MAAM,CAACD,MAAM,CAACV,2BAA2B;EAAC,CAAE,EACtF;IAAES,IAAI,EAAE,yBAAyB;IAAEC,MAAM,EAAEC,MAAM,CAACD,MAAM,CAACR,aAAa;EAAC,CAAE,EACzE;IAAEO,IAAI,EAAE,wBAAwB;IAAEG,IAAI,EAAE;EAAQ,CAAE,EAClD;IAAEH,IAAI,EAAE,WAAW;IAAEG,IAAI,EAAE;EAAQ,CAAE,EACrC;IAAEH,IAAI,EAAE,MAAM;IAAEC,MAAM,EAAEC,MAAM,CAACD,MAAM,CAACT,gBAAgB;EAAC,CAAE,EACzD;IAAEQ,IAAI,EAAE,6BAA6B;IAAEC,MAAM,EAAEC,MAAM,CAACD,MAAM,CAACX,2BAA2B;EAAC,CAAE,EAC3F;IAAEU,IAAI,EAAE,oBAAoB;IAAEC,MAAM,EAAEC,MAAM,CAACD,MAAM,CAACP,kBAAkB;EAAC,CAAE,CAC1E,CAAC;EAEF,IAAIG,KAAK,EAAE;IACT,OAAOA,KAAK;;EAGd,IAAID,gBAAgB,CAACG,KAAK,EAAE;IAE1B;IACA;IACA,IAAI,WAAW,IAAIH,gBAAgB,CAACG,KAAK,IAAI,6BAA6B,IAAIH,gBAAgB,CAACG,KAAK,EAAE;MACpG,OAAO,IAAIK,SAAS,CAAC,iIAAiI,CAAC;;IAGzJ;IACA;IACA,IAAI,kBAAkB,IAAIR,gBAAgB,CAACG,KAAK,IAAI,wBAAwB,IAAIH,gBAAgB,CAACG,KAAK,EAAE;MACtG,OAAO,IAAIK,SAAS,CAAC,mIAAmI,CAAC;;IAG3J,OAAOC,wBAAwB,CAACT,gBAAgB,CAACG,KAAK,CAACO,gBAAgB,CAAC;;EAG1E,OAAO,IAAI;AACb;AAEA;;;;;;AAMA,SAASC,kBAAkBA,CAACC,KAAK,EAAEC,OAAO;EACxC,IAAI,EAAED,KAAK,YAAYC,OAAO,CAACC,eAAe,IACzCF,KAAK,YAAYC,OAAO,CAACE,cAAc,IACvCH,KAAK,YAAYC,OAAO,CAACG,eAAe,IACxCJ,KAAK,YAAYC,OAAO,CAACI,gBAAgB,CAAC,EAAE;IAC/C;IACA,MAAMzB,CAAC,CAAC0B,YAAY,CAAC,OAAO,EAAE,uEAAuE,CAAC;;AAE1G;AAEA;;;;;;;;;AASA,SAAShB,cAAcA,CAACiB,MAAM,EAAEC,IAAI,EAAEC,UAAe;EAAf,IAAAA,UAAA;IAAAA,UAAA,KAAe;EAAA;EACnD;EACA;EACA;EACA,IAAI,OAAOF,MAAM,KAAK,WAAW,EAAE;IACjC,OAAO,IAAI;;EAEb;EACA;EACA,IAAIA,MAAM,KAAK,IAAI,IAAI,CAAC9B,gBAAgB,CAAC8B,MAAM,CAAC,EAAE;IAChD,OAAO3B,CAAC,CAAC0B,YAAY,CAACE,IAAI,EAAE,QAAQ,CAAC;;EAEvC;EACA;EACA,OAAOC,UAAU,CAACC,MAAM,CAAC,UAACrB,KAAK,EAAEV,EAAsB;QAApBa,IAAI,GAAAb,EAAA,CAAAa,IAAA;MAAEG,IAAI,GAAAhB,EAAA,CAAAgB,IAAA;MAAEF,MAAM,GAAAd,EAAA,CAAAc,MAAA;IACnD,IAAIJ,KAAK,IAAI,EAAEG,IAAI,IAAIe,MAAM,CAAC,EAAE;MAC9B,OAAOlB,KAAK;;IAEd,IAAMsB,KAAK,GAAGJ,MAAM,CAACf,IAAI,CAAC;IAC1B,IAAIG,IAAI,IAAI,OAAOgB,KAAK,KAAKhB,IAAI,EAAE;MACjC,OAAOf,CAAC,CAAC0B,YAAY,CAAIE,IAAI,SAAIhB,IAAM,EAAEG,IAAI,CAAC;;IAEhD,IAAIA,IAAI,KAAK,QAAQ,IAAIiB,KAAK,CAACD,KAAK,CAAC,EAAE;MACrC,OAAO/B,CAAC,CAAC0B,YAAY,CAAIE,IAAI,SAAIhB,IAAM,EAAEG,IAAI,CAAC;;IAEhD,IAAIkB,KAAK,CAACC,OAAO,CAACrB,MAAM,CAAC,IAAI,CAACA,MAAM,CAACsB,QAAQ,CAACJ,KAAK,CAAC,EAAE;MACpD,OAAO/B,CAAC,CAACoC,aAAa,CAAIR,IAAI,SAAIhB,IAAM,EAAEC,MAAM,CAAC;;IAEnD,OAAOJ,KAAK;EACd,CAAC,EAAE,IAAI,CAAC;AACV;AAEA;;;;;AAKA,SAASQ,wBAAwBA,CAACC,gBAAgB;EAChD,IAAMU,IAAI,GAAG,iDAAiD;EAC9D,IAAInB,KAAK,GAAGC,cAAc,CAACQ,gBAAgB,EAAEU,IAAI,CAAC;EAClD,OAAOV,gBAAgB,GAAGT,KAAK,IAAIK,MAAM,CAACD,MAAM,CAACR,aAAa,CAAC,CAACyB,MAAM,CAAC,UAACrB,KAAK,EAAEG,IAAI;IACjF,OAAOH,KAAK,IAAIC,cAAc,CAACQ,gBAAgB,CAACN,IAAI,CAAC,EAAKgB,IAAI,SAAIhB,IAAM,EAAE,CACxE;MAAEA,IAAI,EAAE,QAAQ;MAAEG,IAAI,EAAE;IAAQ,CAAE,EAClC;MAAEH,IAAI,EAAE,OAAO;MAAEG,IAAI,EAAE;IAAQ,CAAE,CAClC,CAAC;EACJ,CAAC,EAAE,IAAI,CAAC,GAAGN,KAAK;AAClB;AAEA4B,OAAO,CAAC9B,wBAAwB,GAAGA,wBAAwB;AAC3D8B,OAAO,CAAClB,kBAAkB,GAAGA,kBAAkB;AAC/CkB,OAAO,CAAC3B,cAAc,GAAGA,cAAc"},"metadata":{},"sourceType":"script","externalDependencies":[]}