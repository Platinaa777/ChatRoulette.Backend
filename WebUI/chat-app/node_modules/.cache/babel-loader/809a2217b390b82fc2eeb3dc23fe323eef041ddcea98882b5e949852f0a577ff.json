{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.syntheticVideo = void 0;\nfunction syntheticVideo(_a) {\n  var _b = _a === void 0 ? {} : _a,\n    _c = _b.width,\n    width = _c === void 0 ? 640 : _c,\n    _d = _b.height,\n    height = _d === void 0 ? 480 : _d;\n  var canvas = Object.assign(document.createElement('canvas'), {\n    width: width,\n    height: height\n  });\n  var ctx = canvas.getContext('2d');\n  ctx.fillStyle = 'green';\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n  var stopped = false;\n  requestAnimationFrame(function animate() {\n    if (!stopped) {\n      // draw random rect/circle.\n      var r = Math.round(Math.random() * 255);\n      var g = Math.round(Math.random() * 255);\n      var b = Math.round(Math.random() * 255);\n      var a = Math.round(Math.random() * 255);\n      ctx.fillStyle = \"rgba(\" + r + \", \" + g + \", \" + b + \", \" + a + \")\";\n      ctx.fillRect(Math.random() * width, Math.random() * height, 50, 50);\n      requestAnimationFrame(animate);\n    }\n  });\n  var stream = canvas.captureStream(30);\n  var track = stream.getTracks()[0];\n  var originalStop = track.stop;\n  track.stop = function () {\n    stopped = true;\n    originalStop.call(track);\n  };\n  return track;\n}\nexports.syntheticVideo = syntheticVideo;","map":{"version":3,"names":["syntheticVideo","_a","_b","_c","width","_d","height","canvas","Object","assign","document","createElement","ctx","getContext","fillStyle","fillRect","stopped","requestAnimationFrame","animate","r","Math","round","random","g","b","a","stream","captureStream","track","getTracks","originalStop","stop","call","exports"],"sources":["/home/denis/RiderProjects/ChatRoulette/WebUI/chat-app/node_modules/twilio-video/lib/preflight/syntheticvideo.ts"],"sourcesContent":["interface CanvasElement extends HTMLCanvasElement {\n  captureStream(frameRate?: number): MediaStream;\n}\n\nexport function syntheticVideo({ width = 640, height = 480 } = {}): MediaStreamTrack {\n  const canvas = Object.assign(\n    document.createElement('canvas'), { width, height }\n  ) as CanvasElement;\n\n  let ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n  ctx.fillStyle = 'green';\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n  let stopped = false;\n  requestAnimationFrame(function animate() {\n    if (!stopped) {\n      // draw random rect/circle.\n      const r = Math.round(Math.random() * 255);\n      const g = Math.round(Math.random() * 255);\n      const b = Math.round(Math.random() * 255);\n      const a = Math.round(Math.random() * 255);\n      ctx.fillStyle = `rgba(${r}, ${g}, ${b}, ${a})`;\n      ctx.fillRect(Math.random() * width, Math.random() * height, 50, 50);\n      requestAnimationFrame(animate);\n    }\n  });\n  const stream = canvas.captureStream(30);\n  const track = stream.getTracks()[0];\n  const originalStop = track.stop;\n  track.stop = () => {\n    stopped = true;\n    originalStop.call(track);\n  };\n\n  return track;\n}\n\n"],"mappings":";;;;;;AAIA,SAAgBA,cAAcA,CAACC,EAAkC;MAAlCC,EAAA,GAAAD,EAAA,cAAgC,EAAE,GAAAA,EAAA;IAAhCE,EAAA,GAAAD,EAAA,CAAAE,KAAW;IAAXA,KAAK,GAAAD,EAAA,cAAG,GAAG,GAAAA,EAAA;IAAEE,EAAA,GAAAH,EAAA,CAAAI,MAAY;IAAZA,MAAM,GAAAD,EAAA,cAAG,GAAG,GAAAA,EAAA;EACxD,IAAME,MAAM,GAAGC,MAAM,CAACC,MAAM,CAC1BC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC,EAAE;IAAEP,KAAK,EAAAA,KAAA;IAAEE,MAAM,EAAAA;EAAA,CAAE,CACnC;EAElB,IAAIM,GAAG,GAAGL,MAAM,CAACM,UAAU,CAAC,IAAI,CAA6B;EAC7DD,GAAG,CAACE,SAAS,GAAG,OAAO;EACvBF,GAAG,CAACG,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAER,MAAM,CAACH,KAAK,EAAEG,MAAM,CAACD,MAAM,CAAC;EAC/C,IAAIU,OAAO,GAAG,KAAK;EACnBC,qBAAqB,CAAC,SAASC,OAAOA,CAAA;IACpC,IAAI,CAACF,OAAO,EAAE;MACZ;MACA,IAAMG,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAG,GAAG,CAAC;MACzC,IAAMC,CAAC,GAAGH,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAG,GAAG,CAAC;MACzC,IAAME,CAAC,GAAGJ,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAG,GAAG,CAAC;MACzC,IAAMG,CAAC,GAAGL,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAG,GAAG,CAAC;MACzCV,GAAG,CAACE,SAAS,GAAG,UAAQK,CAAC,UAAKI,CAAC,UAAKC,CAAC,UAAKC,CAAC,MAAG;MAC9Cb,GAAG,CAACG,QAAQ,CAACK,IAAI,CAACE,MAAM,EAAE,GAAGlB,KAAK,EAAEgB,IAAI,CAACE,MAAM,EAAE,GAAGhB,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;MACnEW,qBAAqB,CAACC,OAAO,CAAC;;EAElC,CAAC,CAAC;EACF,IAAMQ,MAAM,GAAGnB,MAAM,CAACoB,aAAa,CAAC,EAAE,CAAC;EACvC,IAAMC,KAAK,GAAGF,MAAM,CAACG,SAAS,EAAE,CAAC,CAAC,CAAC;EACnC,IAAMC,YAAY,GAAGF,KAAK,CAACG,IAAI;EAC/BH,KAAK,CAACG,IAAI,GAAG;IACXf,OAAO,GAAG,IAAI;IACdc,YAAY,CAACE,IAAI,CAACJ,KAAK,CAAC;EAC1B,CAAC;EAED,OAAOA,KAAK;AACd;AA9BAK,OAAA,CAAAjC,cAAA,GAAAA,cAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}