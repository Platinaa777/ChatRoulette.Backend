{"ast":null,"code":"'use strict';\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nvar _a = require('./util'),\n  flatMap = _a.flatMap,\n  guessBrowser = _a.guessBrowser,\n  guessBrowserVersion = _a.guessBrowserVersion;\nvar getSdpFormat = require('./util/sdp').getSdpFormat;\nvar guess = guessBrowser();\nvar guessVersion = guessBrowserVersion();\nvar isChrome = guess === 'chrome';\nvar isFirefox = guess === 'firefox';\nvar isSafari = guess === 'safari';\nvar chromeMajorVersion = isChrome ? guessVersion.major : null;\nvar CHROME_LEGACY_MAX_AUDIO_LEVEL = 32767;\n/**\n * Get the standardized {@link RTCPeerConnection} statistics.\n * @param {RTCPeerConnection} peerConnection\n * @param {object} [options] - Used for testing\n * @returns {Promise.<StandardizedStatsResponse>}\n */\nfunction getStats(peerConnection, options) {\n  if (!(peerConnection && typeof peerConnection.getStats === 'function')) {\n    return Promise.reject(new Error('Given PeerConnection does not support getStats'));\n  }\n  return _getStats(peerConnection, options);\n}\n/**\n * getStats() implementation.\n * @param {RTCPeerConnection} peerConnection\n * @param {object} [options] - Used for testing\n * @returns {Promise.<StandardizedStatsResponse>}\n */\nfunction _getStats(peerConnection, options) {\n  var localAudioTracks = getTracks(peerConnection, 'audio', 'local');\n  var localVideoTracks = getTracks(peerConnection, 'video', 'local');\n  var remoteAudioTracks = getTracks(peerConnection, 'audio');\n  var remoteVideoTracks = getTracks(peerConnection, 'video');\n  var statsResponse = {\n    activeIceCandidatePair: null,\n    localAudioTrackStats: [],\n    localVideoTrackStats: [],\n    remoteAudioTrackStats: [],\n    remoteVideoTrackStats: []\n  };\n  var trackStatsPromises = flatMap([[localAudioTracks, 'localAudioTrackStats', false], [localVideoTracks, 'localVideoTrackStats', false], [remoteAudioTracks, 'remoteAudioTrackStats', true], [remoteVideoTracks, 'remoteVideoTrackStats', true]], function (_a) {\n    var _b = __read(_a, 3),\n      tracks = _b[0],\n      statsArrayName = _b[1],\n      isRemote = _b[2];\n    return tracks.map(function (track) {\n      return getTrackStats(peerConnection, track, Object.assign({\n        isRemote: isRemote\n      }, options)).then(function (trackStatsArray) {\n        trackStatsArray.forEach(function (trackStats) {\n          trackStats.trackId = track.id;\n          statsResponse[statsArrayName].push(trackStats);\n        });\n      });\n    });\n  });\n  return Promise.all(trackStatsPromises).then(function () {\n    return getActiveIceCandidatePairStats(peerConnection, options);\n  }).then(function (activeIceCandidatePairStatsReport) {\n    statsResponse.activeIceCandidatePair = activeIceCandidatePairStatsReport;\n    return statsResponse;\n  });\n}\n/**\n * Generate the {@link StandardizedActiveIceCandidatePairStatsReport} for the\n * {@link RTCPeerConnection}.\n * @param {RTCPeerConnection} peerConnection\n * @param {object} [options]\n * @returns {Promise<StandardizedActiveIceCandidatePairStatsReport>}\n */\nfunction getActiveIceCandidatePairStats(peerConnection, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  if (typeof options.testForChrome !== 'undefined' || isChrome || typeof options.testForSafari !== 'undefined' || isSafari) {\n    return peerConnection.getStats().then(standardizeChromeOrSafariActiveIceCandidatePairStats);\n  }\n  if (typeof options.testForFirefox !== 'undefined' || isFirefox) {\n    return peerConnection.getStats().then(standardizeFirefoxActiveIceCandidatePairStats);\n  }\n  return Promise.reject(new Error('RTCPeerConnection#getStats() not supported'));\n}\n/**\n * Standardize the active RTCIceCandidate pair's statistics in Chrome or Safari.\n * @param {RTCStatsReport} stats\n * @returns {?StandardizedActiveIceCandidatePairStatsReport}\n */\nfunction standardizeChromeOrSafariActiveIceCandidatePairStats(stats) {\n  var activeCandidatePairStats = Array.from(stats.values()).find(function (_a) {\n    var nominated = _a.nominated,\n      type = _a.type;\n    return type === 'candidate-pair' && nominated;\n  });\n  if (!activeCandidatePairStats) {\n    return null;\n  }\n  var activeLocalCandidateStats = stats.get(activeCandidatePairStats.localCandidateId);\n  var activeRemoteCandidateStats = stats.get(activeCandidatePairStats.remoteCandidateId);\n  var standardizedCandidateStatsKeys = [{\n    key: 'candidateType',\n    type: 'string'\n  }, {\n    key: 'ip',\n    type: 'string'\n  }, {\n    key: 'port',\n    type: 'number'\n  }, {\n    key: 'priority',\n    type: 'number'\n  }, {\n    key: 'protocol',\n    type: 'string'\n  }, {\n    key: 'url',\n    type: 'string'\n  }];\n  var standardizedLocalCandidateStatsKeys = standardizedCandidateStatsKeys.concat([{\n    key: 'deleted',\n    type: 'boolean'\n  }, {\n    key: 'relayProtocol',\n    type: 'string'\n  }]);\n  var standatdizedLocalCandidateStatsReport = activeLocalCandidateStats ? standardizedLocalCandidateStatsKeys.reduce(function (report, _a) {\n    var key = _a.key,\n      type = _a.type;\n    report[key] = typeof activeLocalCandidateStats[key] === type ? activeLocalCandidateStats[key] : key === 'deleted' ? false : null;\n    return report;\n  }, {}) : null;\n  var standardizedRemoteCandidateStatsReport = activeRemoteCandidateStats ? standardizedCandidateStatsKeys.reduce(function (report, _a) {\n    var key = _a.key,\n      type = _a.type;\n    report[key] = typeof activeRemoteCandidateStats[key] === type ? activeRemoteCandidateStats[key] : null;\n    return report;\n  }, {}) : null;\n  return [{\n    key: 'availableIncomingBitrate',\n    type: 'number'\n  }, {\n    key: 'availableOutgoingBitrate',\n    type: 'number'\n  }, {\n    key: 'bytesReceived',\n    type: 'number'\n  }, {\n    key: 'bytesSent',\n    type: 'number'\n  }, {\n    key: 'consentRequestsSent',\n    type: 'number'\n  }, {\n    key: 'currentRoundTripTime',\n    type: 'number'\n  }, {\n    key: 'lastPacketReceivedTimestamp',\n    type: 'number'\n  }, {\n    key: 'lastPacketSentTimestamp',\n    type: 'number'\n  }, {\n    key: 'nominated',\n    type: 'boolean'\n  }, {\n    key: 'priority',\n    type: 'number'\n  }, {\n    key: 'readable',\n    type: 'boolean'\n  }, {\n    key: 'requestsReceived',\n    type: 'number'\n  }, {\n    key: 'requestsSent',\n    type: 'number'\n  }, {\n    key: 'responsesReceived',\n    type: 'number'\n  }, {\n    key: 'responsesSent',\n    type: 'number'\n  }, {\n    key: 'retransmissionsReceived',\n    type: 'number'\n  }, {\n    key: 'retransmissionsSent',\n    type: 'number'\n  }, {\n    key: 'state',\n    type: 'string',\n    fixup: function (state) {\n      return state === 'inprogress' ? 'in-progress' : state;\n    }\n  }, {\n    key: 'totalRoundTripTime',\n    type: 'number'\n  }, {\n    key: 'transportId',\n    type: 'string'\n  }, {\n    key: 'writable',\n    type: 'boolean'\n  }].reduce(function (report, _a) {\n    var key = _a.key,\n      type = _a.type,\n      fixup = _a.fixup;\n    report[key] = typeof activeCandidatePairStats[key] === type ? fixup ? fixup(activeCandidatePairStats[key]) : activeCandidatePairStats[key] : null;\n    return report;\n  }, {\n    localCandidate: standatdizedLocalCandidateStatsReport,\n    remoteCandidate: standardizedRemoteCandidateStatsReport\n  });\n}\n/**\n * Standardize the active RTCIceCandidate pair's statistics in Firefox.\n * @param {RTCStatsReport} stats\n * @returns {?StandardizedActiveIceCandidatePairStatsReport}\n */\nfunction standardizeFirefoxActiveIceCandidatePairStats(stats) {\n  var activeCandidatePairStats = Array.from(stats.values()).find(function (_a) {\n    var nominated = _a.nominated,\n      type = _a.type;\n    return type === 'candidate-pair' && nominated;\n  });\n  if (!activeCandidatePairStats) {\n    return null;\n  }\n  var activeLocalCandidateStats = stats.get(activeCandidatePairStats.localCandidateId);\n  var activeRemoteCandidateStats = stats.get(activeCandidatePairStats.remoteCandidateId);\n  var standardizedCandidateStatsKeys = [{\n    key: 'candidateType',\n    type: 'string'\n  }, {\n    key: 'ip',\n    ffKeys: ['address', 'ipAddress'],\n    type: 'string'\n  }, {\n    key: 'port',\n    ffKeys: ['portNumber'],\n    type: 'number'\n  }, {\n    key: 'priority',\n    type: 'number'\n  }, {\n    key: 'protocol',\n    ffKeys: ['transport'],\n    type: 'string'\n  }, {\n    key: 'url',\n    type: 'string'\n  }];\n  var standardizedLocalCandidateStatsKeys = standardizedCandidateStatsKeys.concat([{\n    key: 'deleted',\n    type: 'boolean'\n  }, {\n    key: 'relayProtocol',\n    type: 'string'\n  }]);\n  var candidateTypes = {\n    host: 'host',\n    peerreflexive: 'prflx',\n    relayed: 'relay',\n    serverreflexive: 'srflx'\n  };\n  var standatdizedLocalCandidateStatsReport = activeLocalCandidateStats ? standardizedLocalCandidateStatsKeys.reduce(function (report, _a) {\n    var ffKeys = _a.ffKeys,\n      key = _a.key,\n      type = _a.type;\n    var localStatKey = ffKeys && ffKeys.find(function (key) {\n      return key in activeLocalCandidateStats;\n    }) || key;\n    report[key] = typeof activeLocalCandidateStats[localStatKey] === type ? localStatKey === 'candidateType' ? candidateTypes[activeLocalCandidateStats[localStatKey]] || activeLocalCandidateStats[localStatKey] : activeLocalCandidateStats[localStatKey] : localStatKey === 'deleted' ? false : null;\n    return report;\n  }, {}) : null;\n  var standardizedRemoteCandidateStatsReport = activeRemoteCandidateStats ? standardizedCandidateStatsKeys.reduce(function (report, _a) {\n    var ffKeys = _a.ffKeys,\n      key = _a.key,\n      type = _a.type;\n    var remoteStatKey = ffKeys && ffKeys.find(function (key) {\n      return key in activeRemoteCandidateStats;\n    }) || key;\n    report[key] = typeof activeRemoteCandidateStats[remoteStatKey] === type ? remoteStatKey === 'candidateType' ? candidateTypes[activeRemoteCandidateStats[remoteStatKey]] || activeRemoteCandidateStats[remoteStatKey] : activeRemoteCandidateStats[remoteStatKey] : null;\n    return report;\n  }, {}) : null;\n  return [{\n    key: 'availableIncomingBitrate',\n    type: 'number'\n  }, {\n    key: 'availableOutgoingBitrate',\n    type: 'number'\n  }, {\n    key: 'bytesReceived',\n    type: 'number'\n  }, {\n    key: 'bytesSent',\n    type: 'number'\n  }, {\n    key: 'consentRequestsSent',\n    type: 'number'\n  }, {\n    key: 'currentRoundTripTime',\n    type: 'number'\n  }, {\n    key: 'lastPacketReceivedTimestamp',\n    type: 'number'\n  }, {\n    key: 'lastPacketSentTimestamp',\n    type: 'number'\n  }, {\n    key: 'nominated',\n    type: 'boolean'\n  }, {\n    key: 'priority',\n    type: 'number'\n  }, {\n    key: 'readable',\n    type: 'boolean'\n  }, {\n    key: 'requestsReceived',\n    type: 'number'\n  }, {\n    key: 'requestsSent',\n    type: 'number'\n  }, {\n    key: 'responsesReceived',\n    type: 'number'\n  }, {\n    key: 'responsesSent',\n    type: 'number'\n  }, {\n    key: 'retransmissionsReceived',\n    type: 'number'\n  }, {\n    key: 'retransmissionsSent',\n    type: 'number'\n  }, {\n    key: 'state',\n    type: 'string'\n  }, {\n    key: 'totalRoundTripTime',\n    type: 'number'\n  }, {\n    key: 'transportId',\n    type: 'string'\n  }, {\n    key: 'writable',\n    type: 'boolean'\n  }].reduce(function (report, _a) {\n    var key = _a.key,\n      type = _a.type;\n    report[key] = typeof activeCandidatePairStats[key] === type ? activeCandidatePairStats[key] : null;\n    return report;\n  }, {\n    localCandidate: standatdizedLocalCandidateStatsReport,\n    remoteCandidate: standardizedRemoteCandidateStatsReport\n  });\n}\n/**\n * Get local/remote audio/video MediaStreamTracks.\n * @param {RTCPeerConnection} peerConnection - The RTCPeerConnection\n * @param {string} kind - 'audio' or 'video'\n * @param {string} [localOrRemote] - 'local' or 'remote'\n * @returns {Array<MediaStreamTrack>}\n */\nfunction getTracks(peerConnection, kind, localOrRemote) {\n  var getSendersOrReceivers = localOrRemote === 'local' ? 'getSenders' : 'getReceivers';\n  if (peerConnection[getSendersOrReceivers]) {\n    return peerConnection[getSendersOrReceivers]().map(function (_a) {\n      var track = _a.track;\n      return track;\n    }).filter(function (track) {\n      return track && track.kind === kind;\n    });\n  }\n  var getStreams = localOrRemote === 'local' ? 'getLocalStreams' : 'getRemoteStreams';\n  var getTracks = kind === 'audio' ? 'getAudioTracks' : 'getVideoTracks';\n  return flatMap(peerConnection[getStreams](), function (stream) {\n    return stream[getTracks]();\n  });\n}\n/**\n * Get the standardized statistics for a particular MediaStreamTrack.\n * @param {RTCPeerConnection} peerConnection\n * @param {MediaStreamTrack} track\n * @param {object} [options] - Used for testing\n * @returns {Promise.<Array<StandardizedTrackStatsReport>>}\n */\nfunction getTrackStats(peerConnection, track, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  if (typeof options.testForChrome !== 'undefined' || isChrome) {\n    return chromeOrSafariGetTrackStats(peerConnection, track, options);\n  }\n  if (typeof options.testForFirefox !== 'undefined' || isFirefox) {\n    return firefoxGetTrackStats(peerConnection, track, options);\n  }\n  if (typeof options.testForSafari !== 'undefined' || isSafari) {\n    if (typeof options.testForSafari !== 'undefined' || getSdpFormat() === 'unified') {\n      return chromeOrSafariGetTrackStats(peerConnection, track, options);\n    }\n    // NOTE(syerrapragada): getStats() is not supported on\n    // Safari versions where plan-b is the SDP format\n    // due to this bug: https://bugs.webkit.org/show_bug.cgi?id=192601\n    return Promise.reject(new Error(['getStats() is not supported on this version of Safari', 'due to this bug: https://bugs.webkit.org/show_bug.cgi?id=192601'].join(' ')));\n  }\n  return Promise.reject(new Error('RTCPeerConnection#getStats() not supported'));\n}\n/**\n * Get the standardized statistics for a particular MediaStreamTrack in Chrome or Safari.\n * @param {RTCPeerConnection} peerConnection\n * @param {MediaStreamTrack} track\n * @param {object} options - Used for testing\n * @returns {Promise.<Array<StandardizedTrackStatsReport>>}\n */\nfunction chromeOrSafariGetTrackStats(peerConnection, track, options) {\n  if (chromeMajorVersion && chromeMajorVersion < 67) {\n    return new Promise(function (resolve, reject) {\n      peerConnection.getStats(function (response) {\n        resolve([standardizeChromeLegacyStats(response, track)]);\n      }, null, reject);\n    });\n  }\n  return peerConnection.getStats(track).then(function (response) {\n    return standardizeChromeOrSafariStats(response, options);\n  });\n}\n/**\n * Get the standardized statistics for a particular MediaStreamTrack in Firefox.\n * @param {RTCPeerConnection} peerConnection\n * @param {MediaStreamTrack} track\n * @param {object} options\n * @returns {Promise.<Array<StandardizedTrackStatsReport>>}\n */\nfunction firefoxGetTrackStats(peerConnection, track, options) {\n  return peerConnection.getStats(track).then(function (response) {\n    return [standardizeFirefoxStats(response, options)];\n  });\n}\n/**\n * Standardize the MediaStreamTrack's legacy statistics in Chrome.\n * @param {RTCStatsResponse} response\n * @param {MediaStreamTrack} track\n * @returns {StandardizedTrackStatsReport}\n */\nfunction standardizeChromeLegacyStats(response, track) {\n  var ssrcReport = response.result().find(function (report) {\n    return report.type === 'ssrc' && report.stat('googTrackId') === track.id;\n  });\n  var standardizedStats = {};\n  if (ssrcReport) {\n    standardizedStats.timestamp = Math.round(Number(ssrcReport.timestamp));\n    standardizedStats = ssrcReport.names().reduce(function (stats, name) {\n      switch (name) {\n        case 'googCodecName':\n          stats.codecName = ssrcReport.stat(name);\n          break;\n        case 'googRtt':\n          stats.roundTripTime = Number(ssrcReport.stat(name));\n          break;\n        case 'googJitterReceived':\n          stats.jitter = Number(ssrcReport.stat(name));\n          break;\n        case 'googFrameWidthInput':\n          stats.frameWidthInput = Number(ssrcReport.stat(name));\n          break;\n        case 'googFrameHeightInput':\n          stats.frameHeightInput = Number(ssrcReport.stat(name));\n          break;\n        case 'googFrameWidthSent':\n          stats.frameWidthSent = Number(ssrcReport.stat(name));\n          break;\n        case 'googFrameHeightSent':\n          stats.frameHeightSent = Number(ssrcReport.stat(name));\n          break;\n        case 'googFrameWidthReceived':\n          stats.frameWidthReceived = Number(ssrcReport.stat(name));\n          break;\n        case 'googFrameHeightReceived':\n          stats.frameHeightReceived = Number(ssrcReport.stat(name));\n          break;\n        case 'googFrameRateInput':\n          stats.frameRateInput = Number(ssrcReport.stat(name));\n          break;\n        case 'googFrameRateSent':\n          stats.frameRateSent = Number(ssrcReport.stat(name));\n          break;\n        case 'googFrameRateReceived':\n          stats.frameRateReceived = Number(ssrcReport.stat(name));\n          break;\n        case 'ssrc':\n          stats[name] = ssrcReport.stat(name);\n          break;\n        case 'bytesReceived':\n        case 'bytesSent':\n        case 'packetsLost':\n        case 'packetsReceived':\n        case 'packetsSent':\n        case 'audioInputLevel':\n        case 'audioOutputLevel':\n          stats[name] = Number(ssrcReport.stat(name));\n          break;\n      }\n      return stats;\n    }, standardizedStats);\n  }\n  return standardizedStats;\n}\n/**\n * Standardize the MediaStreamTrack's statistics in Chrome or Safari.\n * @param {RTCStatsResponse} response\n * @param {object} options - Used for testing\n * @returns {Array<StandardizedTrackStatsReport>}\n */\nfunction standardizeChromeOrSafariStats(response, _a) {\n  var _b = _a.simulateExceptionWhileStandardizingStats,\n    simulateExceptionWhileStandardizingStats = _b === void 0 ? false : _b;\n  if (simulateExceptionWhileStandardizingStats) {\n    throw new Error('Error while gathering stats');\n  }\n  var inbound = null;\n  // NOTE(mpatwardhan): We should expect more than one \"outbound-rtp\" stats for a\n  // VP8 simulcast MediaStreamTrack.\n  var outbound = [];\n  var remoteInbound = null;\n  var remoteOutbound = null;\n  var track = null;\n  var codec = null;\n  var localMedia = null;\n  response.forEach(function (stat) {\n    var type = stat.type;\n    switch (type) {\n      case 'inbound-rtp':\n        inbound = stat;\n        break;\n      case 'outbound-rtp':\n        outbound.push(stat);\n        break;\n      case 'media-source':\n        localMedia = stat;\n        break;\n      case 'track':\n        track = stat;\n        break;\n      case 'codec':\n        codec = stat;\n        break;\n      case 'remote-inbound-rtp':\n        remoteInbound = stat;\n        break;\n      case 'remote-outbound-rtp':\n        remoteOutbound = stat;\n        break;\n    }\n  });\n  var isRemote = track ? track.remoteSource : !localMedia;\n  var mainSources = isRemote ? [inbound] : outbound;\n  var stats = [];\n  var remoteSource = isRemote ? remoteOutbound : remoteInbound; // remote rtp stats\n  mainSources.forEach(function (source) {\n    var standardizedStats = {};\n    var statSources = [source, localMedia, track, codec, remoteSource && remoteSource.ssrc === source.ssrc ? remoteSource : null // remote rtp stats\n    ];\n\n    function getStatValue(name) {\n      var sourceFound = statSources.find(function (statSource) {\n        return statSource && typeof statSource[name] !== 'undefined';\n      }) || null;\n      return sourceFound ? sourceFound[name] : null;\n    }\n    var ssrc = getStatValue('ssrc');\n    if (typeof ssrc === 'number') {\n      standardizedStats.ssrc = String(ssrc);\n    }\n    var timestamp = getStatValue('timestamp');\n    standardizedStats.timestamp = Math.round(timestamp);\n    var mimeType = getStatValue('mimeType');\n    if (typeof mimeType === 'string') {\n      mimeType = mimeType.split('/');\n      standardizedStats.codecName = mimeType[mimeType.length - 1];\n    }\n    var roundTripTime = getStatValue('roundTripTime');\n    if (typeof roundTripTime === 'number') {\n      standardizedStats.roundTripTime = Math.round(roundTripTime * 1000);\n    }\n    var jitter = getStatValue('jitter');\n    if (typeof jitter === 'number') {\n      standardizedStats.jitter = Math.round(jitter * 1000);\n    }\n    var frameWidth = getStatValue('frameWidth');\n    if (typeof frameWidth === 'number') {\n      if (isRemote) {\n        standardizedStats.frameWidthReceived = frameWidth;\n      } else {\n        standardizedStats.frameWidthSent = frameWidth;\n        standardizedStats.frameWidthInput = track ? track.frameWidth : localMedia.width;\n      }\n    }\n    var frameHeight = getStatValue('frameHeight');\n    if (typeof frameHeight === 'number') {\n      if (isRemote) {\n        standardizedStats.frameHeightReceived = frameHeight;\n      } else {\n        standardizedStats.frameHeightSent = frameHeight;\n        standardizedStats.frameHeightInput = track ? track.frameHeight : localMedia.height;\n      }\n    }\n    var framesPerSecond = getStatValue('framesPerSecond');\n    if (typeof framesPerSecond === 'number') {\n      standardizedStats[isRemote ? 'frameRateReceived' : 'frameRateSent'] = framesPerSecond;\n    }\n    var bytesReceived = getStatValue('bytesReceived');\n    if (typeof bytesReceived === 'number') {\n      standardizedStats.bytesReceived = bytesReceived;\n    }\n    var bytesSent = getStatValue('bytesSent');\n    if (typeof bytesSent === 'number') {\n      standardizedStats.bytesSent = bytesSent;\n    }\n    var packetsLost = getStatValue('packetsLost');\n    if (typeof packetsLost === 'number') {\n      standardizedStats.packetsLost = packetsLost;\n    }\n    var packetsReceived = getStatValue('packetsReceived');\n    if (typeof packetsReceived === 'number') {\n      standardizedStats.packetsReceived = packetsReceived;\n    }\n    var packetsSent = getStatValue('packetsSent');\n    if (typeof packetsSent === 'number') {\n      standardizedStats.packetsSent = packetsSent;\n    }\n    var audioLevel = getStatValue('audioLevel');\n    if (typeof audioLevel === 'number') {\n      audioLevel = Math.round(audioLevel * CHROME_LEGACY_MAX_AUDIO_LEVEL);\n      if (isRemote) {\n        standardizedStats.audioOutputLevel = audioLevel;\n      } else {\n        standardizedStats.audioInputLevel = audioLevel;\n      }\n    }\n    var totalPacketSendDalay = getStatValue('totalPacketSendDelay');\n    if (typeof totalPacketSendDalay === 'number') {\n      standardizedStats.totalPacketSendDelay = totalPacketSendDalay;\n    }\n    var totalEncodeTime = getStatValue('totalEncodeTime');\n    if (typeof totalEncodeTime === 'number') {\n      standardizedStats.totalEncodeTime = totalEncodeTime;\n    }\n    var framesEncoded = getStatValue('framesEncoded');\n    if (typeof framesEncoded === 'number') {\n      standardizedStats.framesEncoded = framesEncoded;\n    }\n    var estimatedPlayoutTimestamp = getStatValue('estimatedPlayoutTimestamp');\n    if (typeof estimatedPlayoutTimestamp === 'number') {\n      standardizedStats.estimatedPlayoutTimestamp = estimatedPlayoutTimestamp;\n    }\n    var totalDecodeTime = getStatValue('totalDecodeTime');\n    if (typeof totalDecodeTime === 'number') {\n      standardizedStats.totalDecodeTime = totalDecodeTime;\n    }\n    var framesDecoded = getStatValue('framesDecoded');\n    if (typeof framesDecoded === 'number') {\n      standardizedStats.framesDecoded = framesDecoded;\n    }\n    var jitterBufferDelay = getStatValue('jitterBufferDelay');\n    if (typeof jitterBufferDelay === 'number') {\n      standardizedStats.jitterBufferDelay = jitterBufferDelay;\n    }\n    var jitterBufferEmittedCount = getStatValue('jitterBufferEmittedCount');\n    if (typeof jitterBufferEmittedCount === 'number') {\n      standardizedStats.jitterBufferEmittedCount = jitterBufferEmittedCount;\n    }\n    stats.push(standardizedStats);\n  });\n  return stats;\n}\n/**\n * Standardize the MediaStreamTrack's statistics in Firefox.\n * @param {RTCStatsReport} response\n * @param {object} options - Used for testing\n * @returns {StandardizedTrackStatsReport}\n */\nfunction standardizeFirefoxStats(response, _a) {\n  if (response === void 0) {\n    response = new Map();\n  }\n  var isRemote = _a.isRemote,\n    _b = _a.simulateExceptionWhileStandardizingStats,\n    simulateExceptionWhileStandardizingStats = _b === void 0 ? false : _b;\n  if (simulateExceptionWhileStandardizingStats) {\n    throw new Error('Error while gathering stats');\n  }\n  // NOTE(mroberts): If getStats is called on a closed RTCPeerConnection,\n  // Firefox returns undefined instead of an RTCStatsReport. We workaround this\n  // here. See the following bug for more details:\n  //\n  //   https://bugzilla.mozilla.org/show_bug.cgi?id=1377225\n  //\n  var inbound = null;\n  var outbound = null;\n  // NOTE(mmalavalli): Starting from Firefox 63, RTC{Inbound, Outbound}RTPStreamStats.isRemote\n  // will be deprecated, followed by its removal in Firefox 66. Also, trying to\n  // access members of the remote RTC{Inbound, Outbound}RTPStreamStats without\n  // using RTCStatsReport.get(remoteId) will trigger console warnings. So, we\n  // no longer depend on \"isRemote\", and we call RTCStatsReport.get(remoteId)\n  // to access the remote RTC{Inbound, Outbound}RTPStreamStats.\n  //\n  // Source: https://blog.mozilla.org/webrtc/getstats-isremote-65/\n  //\n  response.forEach(function (stat) {\n    var isRemote = stat.isRemote,\n      remoteId = stat.remoteId,\n      type = stat.type;\n    if (isRemote) {\n      return;\n    }\n    switch (type) {\n      case 'inbound-rtp':\n        inbound = stat;\n        outbound = response.get(remoteId);\n        break;\n      case 'outbound-rtp':\n        outbound = stat;\n        inbound = response.get(remoteId);\n        break;\n    }\n  });\n  var first = isRemote ? inbound : outbound;\n  var second = isRemote ? outbound : inbound;\n  function getStatValue(name) {\n    if (first && typeof first[name] !== 'undefined') {\n      return first[name];\n    }\n    if (second && typeof second[name] !== 'undefined') {\n      return second[name];\n    }\n    return null;\n  }\n  var standardizedStats = {};\n  var timestamp = getStatValue('timestamp');\n  standardizedStats.timestamp = Math.round(timestamp);\n  var ssrc = getStatValue('ssrc');\n  if (typeof ssrc === 'number') {\n    standardizedStats.ssrc = String(ssrc);\n  }\n  var bytesSent = getStatValue('bytesSent');\n  if (typeof bytesSent === 'number') {\n    standardizedStats.bytesSent = bytesSent;\n  }\n  var packetsLost = getStatValue('packetsLost');\n  if (typeof packetsLost === 'number') {\n    standardizedStats.packetsLost = packetsLost;\n  }\n  var packetsSent = getStatValue('packetsSent');\n  if (typeof packetsSent === 'number') {\n    standardizedStats.packetsSent = packetsSent;\n  }\n  var roundTripTime = getStatValue('roundTripTime');\n  if (typeof roundTripTime === 'number') {\n    // roundTripTime is double - measured in seconds.\n    // https://www.w3.org/TR/webrtc-stats/#dom-rtcremoteinboundrtpstreamstats-roundtriptime\n    // cover it to milliseconds (and make it integer)\n    standardizedStats.roundTripTime = Math.round(roundTripTime * 1000);\n  }\n  var jitter = getStatValue('jitter');\n  if (typeof jitter === 'number') {\n    standardizedStats.jitter = Math.round(jitter * 1000);\n  }\n  var frameRateSent = getStatValue('framerateMean');\n  if (typeof frameRateSent === 'number') {\n    standardizedStats.frameRateSent = Math.round(frameRateSent);\n  }\n  var bytesReceived = getStatValue('bytesReceived');\n  if (typeof bytesReceived === 'number') {\n    standardizedStats.bytesReceived = bytesReceived;\n  }\n  var packetsReceived = getStatValue('packetsReceived');\n  if (typeof packetsReceived === 'number') {\n    standardizedStats.packetsReceived = packetsReceived;\n  }\n  var frameRateReceived = getStatValue('framerateMean');\n  if (typeof frameRateReceived === 'number') {\n    standardizedStats.frameRateReceived = Math.round(frameRateReceived);\n  }\n  var totalPacketSendDalay = getStatValue('totalPacketSendDelay');\n  if (typeof totalPacketSendDalay === 'number') {\n    standardizedStats.totalPacketSendDelay = totalPacketSendDalay;\n  }\n  var totalEncodeTime = getStatValue('totalEncodeTime');\n  if (typeof totalEncodeTime === 'number') {\n    standardizedStats.totalEncodeTime = totalEncodeTime;\n  }\n  var framesEncoded = getStatValue('framesEncoded');\n  if (typeof framesEncoded === 'number') {\n    standardizedStats.framesEncoded = framesEncoded;\n  }\n  var estimatedPlayoutTimestamp = getStatValue('estimatedPlayoutTimestamp');\n  if (typeof estimatedPlayoutTimestamp === 'number') {\n    standardizedStats.estimatedPlayoutTimestamp = estimatedPlayoutTimestamp;\n  }\n  var totalDecodeTime = getStatValue('totalDecodeTime');\n  if (typeof totalDecodeTime === 'number') {\n    standardizedStats.totalDecodeTime = totalDecodeTime;\n  }\n  var framesDecoded = getStatValue('framesDecoded');\n  if (typeof framesDecoded === 'number') {\n    standardizedStats.framesDecoded = framesDecoded;\n  }\n  var jitterBufferDelay = getStatValue('jitterBufferDelay');\n  if (typeof jitterBufferDelay === 'number') {\n    standardizedStats.jitterBufferDelay = jitterBufferDelay;\n  }\n  var jitterBufferEmittedCount = getStatValue('jitterBufferEmittedCount');\n  if (typeof jitterBufferEmittedCount === 'number') {\n    standardizedStats.jitterBufferEmittedCount = jitterBufferEmittedCount;\n  }\n  return standardizedStats;\n}\n/**\n * Standardized RTCIceCandidate statistics.\n * @typedef {object} StandardizedIceCandidateStatsReport\n * @property {'host'|'prflx'|'relay'|'srflx'} candidateType\n * @property {string} ip\n * @property {number} port\n * @property {number} priority\n * @property {'tcp'|'udp'} protocol\n * @property {string} url\n */\n/**\n * Standardized local RTCIceCandidate statistics.\n * @typedef {StandardizedIceCandidateStatsReport} StandardizedLocalIceCandidateStatsReport\n * @property {boolean} [deleted=false]\n * @property {'tcp'|'tls'|'udp'} relayProtocol\n */\n/**\n * Standardized active RTCIceCandidate pair statistics.\n * @typedef {object} StandardizedActiveIceCandidatePairStatsReport\n * @property {number} availableIncomingBitrate\n * @property {number} availableOutgoingBitrate\n * @property {number} bytesReceived\n * @property {number} bytesSent\n * @property {number} consentRequestsSent\n * @property {number} currentRoundTripTime\n * @property {number} lastPacketReceivedTimestamp\n * @property {number} lastPacketSentTimestamp\n * @property {StandardizedLocalIceCandidateStatsReport} localCandidate\n * @property {boolean} nominated\n * @property {number} priority\n * @property {boolean} readable\n * @property {StandardizedIceCandidateStatsReport} remoteCandidate\n * @property {number} requestsReceived\n * @property {number} requestsSent\n * @property {number} responsesReceived\n * @property {number} responsesSent\n * @property {number} retransmissionsReceived\n * @property {number} retransmissionsSent\n * @property {'frozen'|'waiting'|'in-progress'|'failed'|'succeeded'} state\n * @property {number} totalRoundTripTime\n * @property {string} transportId\n * @property {boolean} writable\n */\n/**\n * Standardized {@link RTCPeerConnection} statistics.\n * @typedef {Object} StandardizedStatsResponse\n * @property {StandardizedActiveIceCandidatePairStatsReport} activeIceCandidatePair - Stats for active ICE candidate pair\n * @property Array<StandardizedTrackStatsReport> localAudioTrackStats - Stats for local audio MediaStreamTracks\n * @property Array<StandardizedTrackStatsReport> localVideoTrackStats - Stats for local video MediaStreamTracks\n * @property Array<StandardizedTrackStatsReport> remoteAudioTrackStats - Stats for remote audio MediaStreamTracks\n * @property Array<StandardizedTrackStatsReport> remoteVideoTrackStats - Stats for remote video MediaStreamTracks\n */\n/**\n * Standardized MediaStreamTrack statistics.\n * @typedef {Object} StandardizedTrackStatsReport\n * @property {string} trackId - MediaStreamTrack ID\n * @property {string} ssrc - SSRC of the MediaStreamTrack\n * @property {number} timestamp - The Unix timestamp in milliseconds\n * @property {string} [codecName] - Name of the codec used to encode the MediaStreamTrack's media\n * @property {number} [roundTripTime] - Round trip time in milliseconds\n * @property {number} [jitter] - Jitter in milliseconds\n * @property {number} [frameWidthInput] - Width in pixels of the local video MediaStreamTrack's captured frame\n * @property {number} [frameHeightInput] - Height in pixels of the local video MediaStreamTrack's captured frame\n * @property {number} [frameWidthSent] - Width in pixels of the local video MediaStreamTrack's encoded frame\n * @property {number} [frameHeightSent] - Height in pixels of the local video MediaStreamTrack's encoded frame\n * @property {number} [frameWidthReceived] - Width in pixels of the remote video MediaStreamTrack's received frame\n * @property {number} [frameHeightReceived] - Height in pixels of the remote video MediaStreamTrack's received frame\n * @property {number} [frameRateInput] - Captured frames per second of the local video MediaStreamTrack\n * @property {number} [frameRateSent] - Frames per second of the local video MediaStreamTrack's encoded video\n * @property {number} [frameRateReceived] - Frames per second of the remote video MediaStreamTrack's received video\n * @property {number} [bytesReceived] - Number of bytes of the remote MediaStreamTrack's media received\n * @property {number} [bytesSent] - Number of bytes of the local MediaStreamTrack's media sent\n * @property {number} [packetsLost] - Number of packets of the MediaStreamTrack's media lost\n * @property {number} [packetsReceived] - Number of packets of the remote MediaStreamTrack's media received\n * @property {number} [packetsSent] - Number of packets of the local MediaStreamTrack's media sent\n * @property {number} [totalPacketSendDelay] - The total number of seconds that the local MediaStreamTrack's packets\n *  have spent buffered locally before being sent over the network\n * @property {number} [totalEncodeTime] - The total number of seconds spent on encoding the local MediaStreamTrack's frames\n * @property {number} [framesEncoded] - The total number of frames of the local MediaStreamTrack that have been encoded sor far\n * @property {number} [estimatedPlayoutTimestamp] - The estimated playout time of the remote MediaStreamTrack\n * @property {number} [totalDecodeTime] - The total number of seconds spent on decoding the remote MediaStreamTrack's frames\n * @property {number} [framesDecoded] - The total number of frames of the remote MediaStreamTrack that have been decoded sor far\n * @property {number} [jitterBufferDelay] - The sum of the time, in seconds, each audio sample or a video frame of the remote\n *   MediaStreamTrack takes from the time the first packet is received by the jitter buffer to the time it exits the jitter buffer\n * @property {number} [jitterBufferEmittedCount] - The total number of audio samples or video frames that have come out of the jitter buffer\n * @property {AudioLevel} [audioInputLevel] - The {@link AudioLevel} of the local audio MediaStreamTrack\n * @property {AudioLevel} [audioOutputLevel] - The {@link AudioLevel} of the remote video MediaStreamTrack\n */\nmodule.exports = getStats;","map":{"version":3,"names":["_a","require","flatMap","guessBrowser","guessBrowserVersion","getSdpFormat","guess","guessVersion","isChrome","isFirefox","isSafari","chromeMajorVersion","major","CHROME_LEGACY_MAX_AUDIO_LEVEL","getStats","peerConnection","options","Promise","reject","Error","_getStats","localAudioTracks","getTracks","localVideoTracks","remoteAudioTracks","remoteVideoTracks","statsResponse","activeIceCandidatePair","localAudioTrackStats","localVideoTrackStats","remoteAudioTrackStats","remoteVideoTrackStats","trackStatsPromises","_b","__read","tracks","statsArrayName","isRemote","map","track","getTrackStats","Object","assign","then","trackStatsArray","forEach","trackStats","trackId","id","push","all","getActiveIceCandidatePairStats","activeIceCandidatePairStatsReport","testForChrome","testForSafari","standardizeChromeOrSafariActiveIceCandidatePairStats","testForFirefox","standardizeFirefoxActiveIceCandidatePairStats","stats","activeCandidatePairStats","Array","from","values","find","nominated","type","activeLocalCandidateStats","get","localCandidateId","activeRemoteCandidateStats","remoteCandidateId","standardizedCandidateStatsKeys","key","standardizedLocalCandidateStatsKeys","concat","standatdizedLocalCandidateStatsReport","reduce","report","standardizedRemoteCandidateStatsReport","fixup","state","localCandidate","remoteCandidate","ffKeys","candidateTypes","host","peerreflexive","relayed","serverreflexive","localStatKey","remoteStatKey","kind","localOrRemote","getSendersOrReceivers","filter","getStreams","stream","chromeOrSafariGetTrackStats","firefoxGetTrackStats","join","resolve","response","standardizeChromeLegacyStats","standardizeChromeOrSafariStats","standardizeFirefoxStats","ssrcReport","result","stat","standardizedStats","timestamp","Math","round","Number","names","name","codecName","roundTripTime","jitter","frameWidthInput","frameHeightInput","frameWidthSent","frameHeightSent","frameWidthReceived","frameHeightReceived","frameRateInput","frameRateSent","frameRateReceived","simulateExceptionWhileStandardizingStats","inbound","outbound","remoteInbound","remoteOutbound","codec","localMedia","remoteSource","mainSources","source","statSources","ssrc","getStatValue","sourceFound","statSource","String","mimeType","split","length","frameWidth","width","frameHeight","height","framesPerSecond","bytesReceived","bytesSent","packetsLost","packetsReceived","packetsSent","audioLevel","audioOutputLevel","audioInputLevel","totalPacketSendDalay","totalPacketSendDelay","totalEncodeTime","framesEncoded","estimatedPlayoutTimestamp","totalDecodeTime","framesDecoded","jitterBufferDelay","jitterBufferEmittedCount","Map","remoteId","first","second","module","exports"],"sources":["/home/denis/RiderProjects/ChatRoulette/WebUI/chat-app/node_modules/twilio-video/lib/webrtc/getstats.js"],"sourcesContent":["'use strict';\n\nconst { flatMap, guessBrowser, guessBrowserVersion } = require('./util');\nconst { getSdpFormat } = require('./util/sdp');\n\nconst guess = guessBrowser();\nconst guessVersion = guessBrowserVersion();\nconst isChrome = guess === 'chrome';\nconst isFirefox = guess === 'firefox';\nconst isSafari = guess === 'safari';\n\nconst chromeMajorVersion = isChrome ? guessVersion.major : null;\n\nconst CHROME_LEGACY_MAX_AUDIO_LEVEL = 32767;\n\n/**\n * Get the standardized {@link RTCPeerConnection} statistics.\n * @param {RTCPeerConnection} peerConnection\n * @param {object} [options] - Used for testing\n * @returns {Promise.<StandardizedStatsResponse>}\n */\nfunction getStats(peerConnection, options) {\n  if (!(peerConnection && typeof peerConnection.getStats === 'function')) {\n    return Promise.reject(new Error('Given PeerConnection does not support getStats'));\n  }\n  return _getStats(peerConnection, options);\n}\n\n/**\n * getStats() implementation.\n * @param {RTCPeerConnection} peerConnection\n * @param {object} [options] - Used for testing\n * @returns {Promise.<StandardizedStatsResponse>}\n */\nfunction _getStats(peerConnection, options) {\n  const localAudioTracks = getTracks(peerConnection, 'audio', 'local');\n  const localVideoTracks = getTracks(peerConnection, 'video', 'local');\n  const remoteAudioTracks = getTracks(peerConnection, 'audio');\n  const remoteVideoTracks = getTracks(peerConnection, 'video');\n\n  const statsResponse = {\n    activeIceCandidatePair: null,\n    localAudioTrackStats: [],\n    localVideoTrackStats: [],\n    remoteAudioTrackStats: [],\n    remoteVideoTrackStats: []\n  };\n\n  const trackStatsPromises = flatMap([\n    [localAudioTracks, 'localAudioTrackStats', false],\n    [localVideoTracks, 'localVideoTrackStats', false],\n    [remoteAudioTracks, 'remoteAudioTrackStats', true],\n    [remoteVideoTracks, 'remoteVideoTrackStats', true]\n  ], ([tracks, statsArrayName, isRemote]) => {\n    return tracks.map(track => {\n      return getTrackStats(peerConnection, track, Object.assign({ isRemote }, options)).then(trackStatsArray => {\n        trackStatsArray.forEach(trackStats => {\n          trackStats.trackId = track.id;\n          statsResponse[statsArrayName].push(trackStats);\n        });\n      });\n    });\n  });\n\n  return Promise.all(trackStatsPromises).then(() => {\n    return getActiveIceCandidatePairStats(peerConnection, options);\n  }).then(activeIceCandidatePairStatsReport => {\n    statsResponse.activeIceCandidatePair = activeIceCandidatePairStatsReport;\n    return statsResponse;\n  });\n}\n\n/**\n * Generate the {@link StandardizedActiveIceCandidatePairStatsReport} for the\n * {@link RTCPeerConnection}.\n * @param {RTCPeerConnection} peerConnection\n * @param {object} [options]\n * @returns {Promise<StandardizedActiveIceCandidatePairStatsReport>}\n */\nfunction getActiveIceCandidatePairStats(peerConnection, options = {}) {\n  if (typeof options.testForChrome !== 'undefined' || isChrome\n    || typeof options.testForSafari  !== 'undefined' || isSafari) {\n    return peerConnection.getStats().then(\n      standardizeChromeOrSafariActiveIceCandidatePairStats);\n  }\n  if (typeof options.testForFirefox !== 'undefined' || isFirefox) {\n    return peerConnection.getStats().then(standardizeFirefoxActiveIceCandidatePairStats);\n  }\n  return Promise.reject(new Error('RTCPeerConnection#getStats() not supported'));\n}\n\n/**\n * Standardize the active RTCIceCandidate pair's statistics in Chrome or Safari.\n * @param {RTCStatsReport} stats\n * @returns {?StandardizedActiveIceCandidatePairStatsReport}\n */\nfunction standardizeChromeOrSafariActiveIceCandidatePairStats(stats) {\n  const activeCandidatePairStats = Array.from(stats.values()).find(\n    ({ nominated, type }) => type === 'candidate-pair' && nominated\n  );\n\n  if (!activeCandidatePairStats) {\n    return null;\n  }\n\n  const activeLocalCandidateStats = stats.get(activeCandidatePairStats.localCandidateId);\n  const activeRemoteCandidateStats = stats.get(activeCandidatePairStats.remoteCandidateId);\n\n  const standardizedCandidateStatsKeys = [\n    { key: 'candidateType', type: 'string' },\n    { key: 'ip', type: 'string' },\n    { key: 'port', type: 'number' },\n    { key: 'priority', type: 'number' },\n    { key: 'protocol', type: 'string' },\n    { key: 'url', type: 'string' }\n  ];\n\n  const standardizedLocalCandidateStatsKeys = standardizedCandidateStatsKeys.concat([\n    { key: 'deleted', type: 'boolean' },\n    { key: 'relayProtocol', type: 'string' }\n  ]);\n\n  const standatdizedLocalCandidateStatsReport = activeLocalCandidateStats\n    ? standardizedLocalCandidateStatsKeys.reduce((report, { key, type }) => {\n      report[key] = typeof activeLocalCandidateStats[key] === type\n        ? activeLocalCandidateStats[key]\n        : key === 'deleted' ? false : null;\n      return report;\n    }, {})\n    : null;\n\n  const standardizedRemoteCandidateStatsReport = activeRemoteCandidateStats\n    ? standardizedCandidateStatsKeys.reduce((report, { key, type }) => {\n      report[key] = typeof activeRemoteCandidateStats[key] === type\n        ? activeRemoteCandidateStats[key]\n        : null;\n      return report;\n    }, {})\n    : null;\n\n  return [\n    { key: 'availableIncomingBitrate', type: 'number' },\n    { key: 'availableOutgoingBitrate', type: 'number' },\n    { key: 'bytesReceived', type: 'number' },\n    { key: 'bytesSent', type: 'number' },\n    { key: 'consentRequestsSent', type: 'number' },\n    { key: 'currentRoundTripTime', type: 'number' },\n    { key: 'lastPacketReceivedTimestamp', type: 'number' },\n    { key: 'lastPacketSentTimestamp', type: 'number' },\n    { key: 'nominated', type: 'boolean' },\n    { key: 'priority', type: 'number' },\n    { key: 'readable', type: 'boolean' },\n    { key: 'requestsReceived', type: 'number' },\n    { key: 'requestsSent', type: 'number' },\n    { key: 'responsesReceived', type: 'number' },\n    { key: 'responsesSent', type: 'number' },\n    { key: 'retransmissionsReceived', type: 'number' },\n    { key: 'retransmissionsSent', type: 'number' },\n    { key: 'state', type: 'string', fixup: state => { return state === 'inprogress' ? 'in-progress' : state; } },\n    { key: 'totalRoundTripTime', type: 'number' },\n    { key: 'transportId', type: 'string' },\n    { key: 'writable', type: 'boolean' }\n  ].reduce((report, { key, type, fixup }) => {\n    report[key] = typeof activeCandidatePairStats[key] === type\n      ? (fixup ? fixup(activeCandidatePairStats[key]) : activeCandidatePairStats[key])\n      : null;\n    return report;\n  }, {\n    localCandidate: standatdizedLocalCandidateStatsReport,\n    remoteCandidate: standardizedRemoteCandidateStatsReport\n  });\n}\n\n/**\n * Standardize the active RTCIceCandidate pair's statistics in Firefox.\n * @param {RTCStatsReport} stats\n * @returns {?StandardizedActiveIceCandidatePairStatsReport}\n */\nfunction standardizeFirefoxActiveIceCandidatePairStats(stats) {\n  const activeCandidatePairStats = Array.from(stats.values()).find(\n    ({ nominated, type }) => type === 'candidate-pair' && nominated\n  );\n\n  if (!activeCandidatePairStats) {\n    return null;\n  }\n\n  const activeLocalCandidateStats = stats.get(activeCandidatePairStats.localCandidateId);\n  const activeRemoteCandidateStats = stats.get(activeCandidatePairStats.remoteCandidateId);\n\n  const standardizedCandidateStatsKeys = [\n    { key: 'candidateType', type: 'string' },\n    { key: 'ip', ffKeys: ['address', 'ipAddress'], type: 'string' },\n    { key: 'port', ffKeys: ['portNumber'], type: 'number' },\n    { key: 'priority', type: 'number' },\n    { key: 'protocol', ffKeys: ['transport'], type: 'string' },\n    { key: 'url', type: 'string' }\n  ];\n\n  const standardizedLocalCandidateStatsKeys = standardizedCandidateStatsKeys.concat([\n    { key: 'deleted', type: 'boolean' },\n    { key: 'relayProtocol', type: 'string' }\n  ]);\n\n  const candidateTypes = {\n    host: 'host',\n    peerreflexive: 'prflx',\n    relayed: 'relay',\n    serverreflexive: 'srflx'\n  };\n\n  const standatdizedLocalCandidateStatsReport = activeLocalCandidateStats\n    ? standardizedLocalCandidateStatsKeys.reduce((report, { ffKeys, key, type }) => {\n      const localStatKey = ffKeys && ffKeys.find(key => key in activeLocalCandidateStats) || key;\n      report[key] = typeof activeLocalCandidateStats[localStatKey] === type\n        ? localStatKey === 'candidateType'\n          ? candidateTypes[activeLocalCandidateStats[localStatKey]] || activeLocalCandidateStats[localStatKey]\n          : activeLocalCandidateStats[localStatKey]\n        : localStatKey === 'deleted' ? false : null;\n      return report;\n    }, {})\n    : null;\n\n  const standardizedRemoteCandidateStatsReport = activeRemoteCandidateStats\n    ? standardizedCandidateStatsKeys.reduce((report, { ffKeys, key, type }) => {\n      const remoteStatKey = ffKeys && ffKeys.find(key => key in activeRemoteCandidateStats) || key;\n      report[key] = typeof activeRemoteCandidateStats[remoteStatKey] === type\n        ? remoteStatKey === 'candidateType'\n          ? candidateTypes[activeRemoteCandidateStats[remoteStatKey]] || activeRemoteCandidateStats[remoteStatKey]\n          : activeRemoteCandidateStats[remoteStatKey]\n        : null;\n      return report;\n    }, {})\n    : null;\n\n  return [\n    { key: 'availableIncomingBitrate', type: 'number' },\n    { key: 'availableOutgoingBitrate', type: 'number' },\n    { key: 'bytesReceived', type: 'number' },\n    { key: 'bytesSent', type: 'number' },\n    { key: 'consentRequestsSent', type: 'number' },\n    { key: 'currentRoundTripTime', type: 'number' },\n    { key: 'lastPacketReceivedTimestamp', type: 'number' },\n    { key: 'lastPacketSentTimestamp', type: 'number' },\n    { key: 'nominated', type: 'boolean' },\n    { key: 'priority', type: 'number' },\n    { key: 'readable', type: 'boolean' },\n    { key: 'requestsReceived', type: 'number' },\n    { key: 'requestsSent', type: 'number' },\n    { key: 'responsesReceived', type: 'number' },\n    { key: 'responsesSent', type: 'number' },\n    { key: 'retransmissionsReceived', type: 'number' },\n    { key: 'retransmissionsSent', type: 'number' },\n    { key: 'state', type: 'string' },\n    { key: 'totalRoundTripTime', type: 'number' },\n    { key: 'transportId', type: 'string' },\n    { key: 'writable', type: 'boolean' }\n  ].reduce((report, { key, type }) => {\n    report[key] = typeof activeCandidatePairStats[key] === type\n      ? activeCandidatePairStats[key]\n      : null;\n    return report;\n  }, {\n    localCandidate: standatdizedLocalCandidateStatsReport,\n    remoteCandidate: standardizedRemoteCandidateStatsReport\n  });\n}\n\n/**\n * Get local/remote audio/video MediaStreamTracks.\n * @param {RTCPeerConnection} peerConnection - The RTCPeerConnection\n * @param {string} kind - 'audio' or 'video'\n * @param {string} [localOrRemote] - 'local' or 'remote'\n * @returns {Array<MediaStreamTrack>}\n */\nfunction getTracks(peerConnection, kind, localOrRemote) {\n  const getSendersOrReceivers = localOrRemote === 'local' ? 'getSenders' : 'getReceivers';\n  if (peerConnection[getSendersOrReceivers]) {\n    return peerConnection[getSendersOrReceivers]()\n      .map(({ track }) => track)\n      .filter(track => track && track.kind === kind);\n  }\n  const getStreams = localOrRemote === 'local' ? 'getLocalStreams' : 'getRemoteStreams';\n  const getTracks = kind === 'audio' ? 'getAudioTracks' : 'getVideoTracks';\n  return flatMap(peerConnection[getStreams](), stream => stream[getTracks]());\n}\n\n/**\n * Get the standardized statistics for a particular MediaStreamTrack.\n * @param {RTCPeerConnection} peerConnection\n * @param {MediaStreamTrack} track\n * @param {object} [options] - Used for testing\n * @returns {Promise.<Array<StandardizedTrackStatsReport>>}\n */\nfunction getTrackStats(peerConnection, track, options = {}) {\n  if (typeof options.testForChrome !== 'undefined' || isChrome) {\n    return chromeOrSafariGetTrackStats(peerConnection, track, options);\n  }\n  if (typeof options.testForFirefox  !== 'undefined' || isFirefox) {\n    return firefoxGetTrackStats(peerConnection, track, options);\n  }\n  if (typeof options.testForSafari  !== 'undefined' || isSafari) {\n    if (typeof options.testForSafari  !== 'undefined' || getSdpFormat() === 'unified') {\n      return chromeOrSafariGetTrackStats(peerConnection, track, options);\n    }\n    // NOTE(syerrapragada): getStats() is not supported on\n    // Safari versions where plan-b is the SDP format\n    // due to this bug: https://bugs.webkit.org/show_bug.cgi?id=192601\n    return Promise.reject(new Error([\n      'getStats() is not supported on this version of Safari',\n      'due to this bug: https://bugs.webkit.org/show_bug.cgi?id=192601'\n    ].join(' ')));\n  }\n  return Promise.reject(new Error('RTCPeerConnection#getStats() not supported'));\n}\n\n/**\n * Get the standardized statistics for a particular MediaStreamTrack in Chrome or Safari.\n * @param {RTCPeerConnection} peerConnection\n * @param {MediaStreamTrack} track\n * @param {object} options - Used for testing\n * @returns {Promise.<Array<StandardizedTrackStatsReport>>}\n */\nfunction chromeOrSafariGetTrackStats(peerConnection, track, options) {\n  if (chromeMajorVersion && chromeMajorVersion < 67) {\n    return new Promise((resolve, reject) => {\n      peerConnection.getStats(response => {\n        resolve([standardizeChromeLegacyStats(response, track)]);\n      }, null, reject);\n    });\n  }\n  return peerConnection.getStats(track).then(response => {\n    return standardizeChromeOrSafariStats(response, options);\n  });\n}\n\n/**\n * Get the standardized statistics for a particular MediaStreamTrack in Firefox.\n * @param {RTCPeerConnection} peerConnection\n * @param {MediaStreamTrack} track\n * @param {object} options\n * @returns {Promise.<Array<StandardizedTrackStatsReport>>}\n */\nfunction firefoxGetTrackStats(peerConnection, track, options) {\n  return peerConnection.getStats(track).then(response => {\n    return [standardizeFirefoxStats(response, options)];\n  });\n}\n\n/**\n * Standardize the MediaStreamTrack's legacy statistics in Chrome.\n * @param {RTCStatsResponse} response\n * @param {MediaStreamTrack} track\n * @returns {StandardizedTrackStatsReport}\n */\nfunction standardizeChromeLegacyStats(response, track) {\n  const ssrcReport = response.result().find(report => {\n    return report.type === 'ssrc' && report.stat('googTrackId') === track.id;\n  });\n\n  let standardizedStats = {};\n\n  if (ssrcReport) {\n    standardizedStats.timestamp = Math.round(Number(ssrcReport.timestamp));\n    standardizedStats = ssrcReport.names().reduce((stats, name) => {\n      switch (name) {\n        case 'googCodecName':\n          stats.codecName = ssrcReport.stat(name);\n          break;\n        case 'googRtt':\n          stats.roundTripTime = Number(ssrcReport.stat(name));\n          break;\n        case 'googJitterReceived':\n          stats.jitter = Number(ssrcReport.stat(name));\n          break;\n        case 'googFrameWidthInput':\n          stats.frameWidthInput = Number(ssrcReport.stat(name));\n          break;\n        case 'googFrameHeightInput':\n          stats.frameHeightInput = Number(ssrcReport.stat(name));\n          break;\n        case 'googFrameWidthSent':\n          stats.frameWidthSent = Number(ssrcReport.stat(name));\n          break;\n        case 'googFrameHeightSent':\n          stats.frameHeightSent = Number(ssrcReport.stat(name));\n          break;\n        case 'googFrameWidthReceived':\n          stats.frameWidthReceived = Number(ssrcReport.stat(name));\n          break;\n        case 'googFrameHeightReceived':\n          stats.frameHeightReceived = Number(ssrcReport.stat(name));\n          break;\n        case 'googFrameRateInput':\n          stats.frameRateInput = Number(ssrcReport.stat(name));\n          break;\n        case 'googFrameRateSent':\n          stats.frameRateSent = Number(ssrcReport.stat(name));\n          break;\n        case 'googFrameRateReceived':\n          stats.frameRateReceived = Number(ssrcReport.stat(name));\n          break;\n        case 'ssrc':\n          stats[name] = ssrcReport.stat(name);\n          break;\n        case 'bytesReceived':\n        case 'bytesSent':\n        case 'packetsLost':\n        case 'packetsReceived':\n        case 'packetsSent':\n        case 'audioInputLevel':\n        case 'audioOutputLevel':\n          stats[name] = Number(ssrcReport.stat(name));\n          break;\n      }\n\n      return stats;\n    }, standardizedStats);\n  }\n\n  return standardizedStats;\n}\n\n/**\n * Standardize the MediaStreamTrack's statistics in Chrome or Safari.\n * @param {RTCStatsResponse} response\n * @param {object} options - Used for testing\n * @returns {Array<StandardizedTrackStatsReport>}\n */\nfunction standardizeChromeOrSafariStats(response, { simulateExceptionWhileStandardizingStats = false }) {\n  if (simulateExceptionWhileStandardizingStats) {\n    throw new Error('Error while gathering stats');\n  }\n  let inbound = null;\n\n  // NOTE(mpatwardhan): We should expect more than one \"outbound-rtp\" stats for a\n  // VP8 simulcast MediaStreamTrack.\n  const outbound = [];\n\n  let remoteInbound = null;\n  let remoteOutbound = null;\n  let track = null;\n  let codec = null;\n  let localMedia = null;\n\n  response.forEach(stat => {\n    const { type } = stat;\n    switch (type) {\n      case 'inbound-rtp':\n        inbound = stat;\n        break;\n      case 'outbound-rtp':\n        outbound.push(stat);\n        break;\n      case 'media-source':\n        localMedia = stat;\n        break;\n      case 'track':\n        track = stat;\n        break;\n      case 'codec':\n        codec = stat;\n        break;\n      case 'remote-inbound-rtp':\n        remoteInbound = stat;\n        break;\n      case 'remote-outbound-rtp':\n        remoteOutbound = stat;\n        break;\n    }\n  });\n\n  const isRemote = track ? track.remoteSource : !localMedia;\n  const mainSources = isRemote ? [inbound] : outbound;\n  const stats = [];\n  const remoteSource = isRemote ? remoteOutbound : remoteInbound; // remote rtp stats\n\n  mainSources.forEach(source => {\n    const standardizedStats = {};\n    const statSources = [\n      source, // local rtp stats\n      localMedia,\n      track,\n      codec,\n      remoteSource && remoteSource.ssrc === source.ssrc ? remoteSource : null, // remote rtp stats\n    ];\n\n    function getStatValue(name) {\n      const sourceFound = statSources.find(statSource => {\n        return statSource && typeof statSource[name] !== 'undefined';\n      }) || null;\n\n      return sourceFound ? sourceFound[name] : null;\n    }\n\n    const ssrc = getStatValue('ssrc');\n    if (typeof ssrc === 'number') {\n      standardizedStats.ssrc = String(ssrc);\n    }\n\n    const timestamp = getStatValue('timestamp');\n    standardizedStats.timestamp = Math.round(timestamp);\n\n    let mimeType = getStatValue('mimeType');\n    if (typeof mimeType === 'string') {\n      mimeType = mimeType.split('/');\n      standardizedStats.codecName = mimeType[mimeType.length - 1];\n    }\n\n    const roundTripTime = getStatValue('roundTripTime');\n    if (typeof roundTripTime === 'number') {\n      standardizedStats.roundTripTime = Math.round(roundTripTime * 1000);\n    }\n\n    const jitter = getStatValue('jitter');\n    if (typeof jitter === 'number') {\n      standardizedStats.jitter = Math.round(jitter * 1000);\n    }\n\n    const frameWidth = getStatValue('frameWidth');\n    if (typeof frameWidth === 'number') {\n      if (isRemote) {\n        standardizedStats.frameWidthReceived = frameWidth;\n      } else {\n        standardizedStats.frameWidthSent = frameWidth;\n        standardizedStats.frameWidthInput = track ? track.frameWidth : localMedia.width;\n      }\n    }\n\n    const frameHeight = getStatValue('frameHeight');\n    if (typeof frameHeight === 'number') {\n      if (isRemote) {\n        standardizedStats.frameHeightReceived = frameHeight;\n      } else {\n        standardizedStats.frameHeightSent = frameHeight;\n        standardizedStats.frameHeightInput = track ? track.frameHeight : localMedia.height;\n      }\n    }\n\n    const framesPerSecond = getStatValue('framesPerSecond');\n    if (typeof framesPerSecond === 'number') {\n      standardizedStats[isRemote ? 'frameRateReceived' : 'frameRateSent'] = framesPerSecond;\n    }\n\n    const bytesReceived = getStatValue('bytesReceived');\n    if (typeof bytesReceived === 'number') {\n      standardizedStats.bytesReceived = bytesReceived;\n    }\n\n    const bytesSent = getStatValue('bytesSent');\n    if (typeof bytesSent === 'number') {\n      standardizedStats.bytesSent = bytesSent;\n    }\n\n    const packetsLost = getStatValue('packetsLost');\n    if (typeof packetsLost === 'number') {\n      standardizedStats.packetsLost = packetsLost;\n    }\n\n    const packetsReceived = getStatValue('packetsReceived');\n    if (typeof packetsReceived === 'number') {\n      standardizedStats.packetsReceived = packetsReceived;\n    }\n\n    const packetsSent = getStatValue('packetsSent');\n    if (typeof packetsSent === 'number') {\n      standardizedStats.packetsSent = packetsSent;\n    }\n\n    let audioLevel = getStatValue('audioLevel');\n    if (typeof audioLevel === 'number') {\n      audioLevel = Math.round(audioLevel * CHROME_LEGACY_MAX_AUDIO_LEVEL);\n      if (isRemote) {\n        standardizedStats.audioOutputLevel = audioLevel;\n      } else {\n        standardizedStats.audioInputLevel = audioLevel;\n      }\n    }\n\n    const totalPacketSendDalay = getStatValue('totalPacketSendDelay');\n    if (typeof totalPacketSendDalay === 'number') {\n      standardizedStats.totalPacketSendDelay = totalPacketSendDalay;\n    }\n\n    const totalEncodeTime = getStatValue('totalEncodeTime');\n    if (typeof totalEncodeTime === 'number') {\n      standardizedStats.totalEncodeTime = totalEncodeTime;\n    }\n\n    const framesEncoded = getStatValue('framesEncoded');\n    if (typeof framesEncoded === 'number') {\n      standardizedStats.framesEncoded = framesEncoded;\n    }\n\n    const estimatedPlayoutTimestamp = getStatValue('estimatedPlayoutTimestamp');\n    if (typeof estimatedPlayoutTimestamp === 'number') {\n      standardizedStats.estimatedPlayoutTimestamp = estimatedPlayoutTimestamp;\n    }\n\n    const totalDecodeTime = getStatValue('totalDecodeTime');\n    if (typeof totalDecodeTime === 'number') {\n      standardizedStats.totalDecodeTime = totalDecodeTime;\n    }\n\n    const framesDecoded = getStatValue('framesDecoded');\n    if (typeof framesDecoded === 'number') {\n      standardizedStats.framesDecoded = framesDecoded;\n    }\n\n    const jitterBufferDelay = getStatValue('jitterBufferDelay');\n    if (typeof jitterBufferDelay === 'number') {\n      standardizedStats.jitterBufferDelay = jitterBufferDelay;\n    }\n\n    const jitterBufferEmittedCount = getStatValue('jitterBufferEmittedCount');\n    if (typeof jitterBufferEmittedCount === 'number') {\n      standardizedStats.jitterBufferEmittedCount = jitterBufferEmittedCount;\n    }\n\n    stats.push(standardizedStats);\n  });\n\n  return stats;\n}\n\n/**\n * Standardize the MediaStreamTrack's statistics in Firefox.\n * @param {RTCStatsReport} response\n * @param {object} options - Used for testing\n * @returns {StandardizedTrackStatsReport}\n */\nfunction standardizeFirefoxStats(response = new Map(), { isRemote, simulateExceptionWhileStandardizingStats = false }) {\n  if (simulateExceptionWhileStandardizingStats) {\n    throw new Error('Error while gathering stats');\n  }\n  // NOTE(mroberts): If getStats is called on a closed RTCPeerConnection,\n  // Firefox returns undefined instead of an RTCStatsReport. We workaround this\n  // here. See the following bug for more details:\n  //\n  //   https://bugzilla.mozilla.org/show_bug.cgi?id=1377225\n  //\n\n  let inbound = null;\n  let outbound = null;\n\n  // NOTE(mmalavalli): Starting from Firefox 63, RTC{Inbound, Outbound}RTPStreamStats.isRemote\n  // will be deprecated, followed by its removal in Firefox 66. Also, trying to\n  // access members of the remote RTC{Inbound, Outbound}RTPStreamStats without\n  // using RTCStatsReport.get(remoteId) will trigger console warnings. So, we\n  // no longer depend on \"isRemote\", and we call RTCStatsReport.get(remoteId)\n  // to access the remote RTC{Inbound, Outbound}RTPStreamStats.\n  //\n  // Source: https://blog.mozilla.org/webrtc/getstats-isremote-65/\n  //\n  response.forEach(stat => {\n    const { isRemote, remoteId, type } = stat;\n    if (isRemote) {\n      return;\n    }\n    switch (type) {\n      case 'inbound-rtp':\n        inbound = stat;\n        outbound = response.get(remoteId);\n        break;\n      case 'outbound-rtp':\n        outbound = stat;\n        inbound = response.get(remoteId);\n        break;\n    }\n  });\n\n  const first = isRemote ? inbound : outbound;\n  const second = isRemote ? outbound : inbound;\n\n  function getStatValue(name) {\n    if (first && typeof first[name] !== 'undefined') {\n      return first[name];\n    }\n    if (second && typeof second[name] !== 'undefined') {\n      return second[name];\n    }\n    return null;\n  }\n\n  const standardizedStats = {};\n  const timestamp = getStatValue('timestamp');\n  standardizedStats.timestamp = Math.round(timestamp);\n\n  const ssrc = getStatValue('ssrc');\n  if (typeof ssrc === 'number') {\n    standardizedStats.ssrc = String(ssrc);\n  }\n\n  const bytesSent = getStatValue('bytesSent');\n  if (typeof bytesSent === 'number') {\n    standardizedStats.bytesSent = bytesSent;\n  }\n\n  const packetsLost = getStatValue('packetsLost');\n  if (typeof packetsLost === 'number') {\n    standardizedStats.packetsLost = packetsLost;\n  }\n\n  const packetsSent = getStatValue('packetsSent');\n  if (typeof packetsSent === 'number') {\n    standardizedStats.packetsSent = packetsSent;\n  }\n\n  const roundTripTime = getStatValue('roundTripTime');\n  if (typeof roundTripTime === 'number') {\n    // roundTripTime is double - measured in seconds.\n    // https://www.w3.org/TR/webrtc-stats/#dom-rtcremoteinboundrtpstreamstats-roundtriptime\n    // cover it to milliseconds (and make it integer)\n    standardizedStats.roundTripTime = Math.round(roundTripTime * 1000);\n  }\n\n  const jitter = getStatValue('jitter');\n  if (typeof jitter === 'number') {\n    standardizedStats.jitter = Math.round(jitter * 1000);\n  }\n\n  const frameRateSent = getStatValue('framerateMean');\n  if (typeof frameRateSent === 'number') {\n    standardizedStats.frameRateSent = Math.round(frameRateSent);\n  }\n\n  const bytesReceived = getStatValue('bytesReceived');\n  if (typeof bytesReceived === 'number') {\n    standardizedStats.bytesReceived = bytesReceived;\n  }\n\n  const packetsReceived = getStatValue('packetsReceived');\n  if (typeof packetsReceived === 'number') {\n    standardizedStats.packetsReceived = packetsReceived;\n  }\n\n  const frameRateReceived = getStatValue('framerateMean');\n  if (typeof frameRateReceived === 'number') {\n    standardizedStats.frameRateReceived = Math.round(frameRateReceived);\n  }\n\n  const totalPacketSendDalay = getStatValue('totalPacketSendDelay');\n  if (typeof totalPacketSendDalay === 'number') {\n    standardizedStats.totalPacketSendDelay = totalPacketSendDalay;\n  }\n\n  const totalEncodeTime = getStatValue('totalEncodeTime');\n  if (typeof totalEncodeTime === 'number') {\n    standardizedStats.totalEncodeTime = totalEncodeTime;\n  }\n\n  const framesEncoded = getStatValue('framesEncoded');\n  if (typeof framesEncoded === 'number') {\n    standardizedStats.framesEncoded = framesEncoded;\n  }\n\n  const estimatedPlayoutTimestamp = getStatValue('estimatedPlayoutTimestamp');\n  if (typeof estimatedPlayoutTimestamp === 'number') {\n    standardizedStats.estimatedPlayoutTimestamp = estimatedPlayoutTimestamp;\n  }\n\n  const totalDecodeTime = getStatValue('totalDecodeTime');\n  if (typeof totalDecodeTime === 'number') {\n    standardizedStats.totalDecodeTime = totalDecodeTime;\n  }\n\n  const framesDecoded = getStatValue('framesDecoded');\n  if (typeof framesDecoded === 'number') {\n    standardizedStats.framesDecoded = framesDecoded;\n  }\n\n  const jitterBufferDelay = getStatValue('jitterBufferDelay');\n  if (typeof jitterBufferDelay === 'number') {\n    standardizedStats.jitterBufferDelay = jitterBufferDelay;\n  }\n\n  const jitterBufferEmittedCount = getStatValue('jitterBufferEmittedCount');\n  if (typeof jitterBufferEmittedCount === 'number') {\n    standardizedStats.jitterBufferEmittedCount = jitterBufferEmittedCount;\n  }\n\n  return standardizedStats;\n}\n\n/**\n * Standardized RTCIceCandidate statistics.\n * @typedef {object} StandardizedIceCandidateStatsReport\n * @property {'host'|'prflx'|'relay'|'srflx'} candidateType\n * @property {string} ip\n * @property {number} port\n * @property {number} priority\n * @property {'tcp'|'udp'} protocol\n * @property {string} url\n */\n\n/**\n * Standardized local RTCIceCandidate statistics.\n * @typedef {StandardizedIceCandidateStatsReport} StandardizedLocalIceCandidateStatsReport\n * @property {boolean} [deleted=false]\n * @property {'tcp'|'tls'|'udp'} relayProtocol\n */\n\n/**\n * Standardized active RTCIceCandidate pair statistics.\n * @typedef {object} StandardizedActiveIceCandidatePairStatsReport\n * @property {number} availableIncomingBitrate\n * @property {number} availableOutgoingBitrate\n * @property {number} bytesReceived\n * @property {number} bytesSent\n * @property {number} consentRequestsSent\n * @property {number} currentRoundTripTime\n * @property {number} lastPacketReceivedTimestamp\n * @property {number} lastPacketSentTimestamp\n * @property {StandardizedLocalIceCandidateStatsReport} localCandidate\n * @property {boolean} nominated\n * @property {number} priority\n * @property {boolean} readable\n * @property {StandardizedIceCandidateStatsReport} remoteCandidate\n * @property {number} requestsReceived\n * @property {number} requestsSent\n * @property {number} responsesReceived\n * @property {number} responsesSent\n * @property {number} retransmissionsReceived\n * @property {number} retransmissionsSent\n * @property {'frozen'|'waiting'|'in-progress'|'failed'|'succeeded'} state\n * @property {number} totalRoundTripTime\n * @property {string} transportId\n * @property {boolean} writable\n */\n\n/**\n * Standardized {@link RTCPeerConnection} statistics.\n * @typedef {Object} StandardizedStatsResponse\n * @property {StandardizedActiveIceCandidatePairStatsReport} activeIceCandidatePair - Stats for active ICE candidate pair\n * @property Array<StandardizedTrackStatsReport> localAudioTrackStats - Stats for local audio MediaStreamTracks\n * @property Array<StandardizedTrackStatsReport> localVideoTrackStats - Stats for local video MediaStreamTracks\n * @property Array<StandardizedTrackStatsReport> remoteAudioTrackStats - Stats for remote audio MediaStreamTracks\n * @property Array<StandardizedTrackStatsReport> remoteVideoTrackStats - Stats for remote video MediaStreamTracks\n */\n\n/**\n * Standardized MediaStreamTrack statistics.\n * @typedef {Object} StandardizedTrackStatsReport\n * @property {string} trackId - MediaStreamTrack ID\n * @property {string} ssrc - SSRC of the MediaStreamTrack\n * @property {number} timestamp - The Unix timestamp in milliseconds\n * @property {string} [codecName] - Name of the codec used to encode the MediaStreamTrack's media\n * @property {number} [roundTripTime] - Round trip time in milliseconds\n * @property {number} [jitter] - Jitter in milliseconds\n * @property {number} [frameWidthInput] - Width in pixels of the local video MediaStreamTrack's captured frame\n * @property {number} [frameHeightInput] - Height in pixels of the local video MediaStreamTrack's captured frame\n * @property {number} [frameWidthSent] - Width in pixels of the local video MediaStreamTrack's encoded frame\n * @property {number} [frameHeightSent] - Height in pixels of the local video MediaStreamTrack's encoded frame\n * @property {number} [frameWidthReceived] - Width in pixels of the remote video MediaStreamTrack's received frame\n * @property {number} [frameHeightReceived] - Height in pixels of the remote video MediaStreamTrack's received frame\n * @property {number} [frameRateInput] - Captured frames per second of the local video MediaStreamTrack\n * @property {number} [frameRateSent] - Frames per second of the local video MediaStreamTrack's encoded video\n * @property {number} [frameRateReceived] - Frames per second of the remote video MediaStreamTrack's received video\n * @property {number} [bytesReceived] - Number of bytes of the remote MediaStreamTrack's media received\n * @property {number} [bytesSent] - Number of bytes of the local MediaStreamTrack's media sent\n * @property {number} [packetsLost] - Number of packets of the MediaStreamTrack's media lost\n * @property {number} [packetsReceived] - Number of packets of the remote MediaStreamTrack's media received\n * @property {number} [packetsSent] - Number of packets of the local MediaStreamTrack's media sent\n * @property {number} [totalPacketSendDelay] - The total number of seconds that the local MediaStreamTrack's packets\n *  have spent buffered locally before being sent over the network\n * @property {number} [totalEncodeTime] - The total number of seconds spent on encoding the local MediaStreamTrack's frames\n * @property {number} [framesEncoded] - The total number of frames of the local MediaStreamTrack that have been encoded sor far\n * @property {number} [estimatedPlayoutTimestamp] - The estimated playout time of the remote MediaStreamTrack\n * @property {number} [totalDecodeTime] - The total number of seconds spent on decoding the remote MediaStreamTrack's frames\n * @property {number} [framesDecoded] - The total number of frames of the remote MediaStreamTrack that have been decoded sor far\n * @property {number} [jitterBufferDelay] - The sum of the time, in seconds, each audio sample or a video frame of the remote\n *   MediaStreamTrack takes from the time the first packet is received by the jitter buffer to the time it exits the jitter buffer\n * @property {number} [jitterBufferEmittedCount] - The total number of audio samples or video frames that have come out of the jitter buffer\n * @property {AudioLevel} [audioInputLevel] - The {@link AudioLevel} of the local audio MediaStreamTrack\n * @property {AudioLevel} [audioOutputLevel] - The {@link AudioLevel} of the remote video MediaStreamTrack\n */\n\nmodule.exports = getStats;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}