{"ast":null,"code":"'use strict';\n\nvar defer = require('./').defer;\n/**\n * An {@link AsyncVar} is an \"asynchronous variable\" which may or may not\n * contain a value of some type T. You can put a value into the {@link AsyncVar}\n * with {@link AsyncVar#put}. Callers can take a value out of the\n * {@link AsyncVar} by queueing up with {@link AsyncVar#take}. N calls to\n * {@link AsyncVar#take} require N calls to {@link AsyncVar#put} to resolve, and\n * they resolve in order.\n */\nvar AsyncVar = /** @class */function () {\n  /**\n   * Construct an {@link AsyncVar}.\n   */\n  function AsyncVar() {\n    Object.defineProperties(this, {\n      _deferreds: {\n        value: []\n      },\n      _hasValue: {\n        value: false,\n        writable: true\n      },\n      _value: {\n        value: null,\n        writable: true\n      }\n    });\n  }\n  /**\n   * Put a value into the {@link AsyncVar}.\n   * @param {T} value\n   * @returns {this}\n   */\n  AsyncVar.prototype.put = function (value) {\n    this._hasValue = true;\n    this._value = value;\n    var deferred = this._deferreds.shift();\n    if (deferred) {\n      deferred.resolve(value);\n    }\n    return this;\n  };\n  /**\n   * Take the value out of the {@link AsyncVar}.\n   * @returns {Promise<T>}\n   */\n  AsyncVar.prototype.take = function () {\n    var _this = this;\n    if (this._hasValue && !this._deferreds.length) {\n      this._hasValue = false;\n      return Promise.resolve(this._value);\n    }\n    var deferred = defer();\n    this._deferreds.push(deferred);\n    return deferred.promise.then(function (value) {\n      _this._hasValue = false;\n      return value;\n    });\n  };\n  return AsyncVar;\n}();\nmodule.exports = AsyncVar;","map":{"version":3,"names":["defer","require","AsyncVar","Object","defineProperties","_deferreds","value","_hasValue","writable","_value","prototype","put","deferred","shift","resolve","take","_this","length","Promise","push","promise","then","module","exports"],"sources":["/home/denis/RiderProjects/ChatRoulette/WebUI/chat-app/node_modules/twilio-video/lib/util/asyncvar.js"],"sourcesContent":["'use strict';\n\nconst { defer } = require('./');\n\n/**\n * An {@link AsyncVar} is an \"asynchronous variable\" which may or may not\n * contain a value of some type T. You can put a value into the {@link AsyncVar}\n * with {@link AsyncVar#put}. Callers can take a value out of the\n * {@link AsyncVar} by queueing up with {@link AsyncVar#take}. N calls to\n * {@link AsyncVar#take} require N calls to {@link AsyncVar#put} to resolve, and\n * they resolve in order.\n */\nclass AsyncVar {\n  /**\n   * Construct an {@link AsyncVar}.\n   */\n  constructor() {\n    Object.defineProperties(this, {\n      _deferreds: {\n        value: []\n      },\n      _hasValue: {\n        value: false,\n        writable: true\n      },\n      _value: {\n        value: null,\n        writable: true\n      }\n    });\n  }\n\n  /**\n   * Put a value into the {@link AsyncVar}.\n   * @param {T} value\n   * @returns {this}\n   */\n  put(value) {\n    this._hasValue = true;\n    this._value = value;\n    const deferred = this._deferreds.shift();\n    if (deferred) {\n      deferred.resolve(value);\n    }\n    return this;\n  }\n\n  /**\n   * Take the value out of the {@link AsyncVar}.\n   * @returns {Promise<T>}\n   */\n  take() {\n    if (this._hasValue && !this._deferreds.length) {\n      this._hasValue = false;\n      return Promise.resolve(this._value);\n    }\n    const deferred = defer();\n    this._deferreds.push(deferred);\n    return deferred.promise.then(value => {\n      this._hasValue = false;\n      return value;\n    });\n  }\n}\n\nmodule.exports = AsyncVar;\n"],"mappings":"AAAA,YAAY;;AAEJ,IAAAA,KAAK,GAAKC,OAAO,CAAC,IAAI,CAAC,CAAAD,KAAlB;AAEb;;;;;;;;AAQA,IAAAE,QAAA;EACE;;;EAGA,SAAAA,SAAA;IACEC,MAAM,CAACC,gBAAgB,CAAC,IAAI,EAAE;MAC5BC,UAAU,EAAE;QACVC,KAAK,EAAE;OACR;MACDC,SAAS,EAAE;QACTD,KAAK,EAAE,KAAK;QACZE,QAAQ,EAAE;OACX;MACDC,MAAM,EAAE;QACNH,KAAK,EAAE,IAAI;QACXE,QAAQ,EAAE;;KAEb,CAAC;EACJ;EAEA;;;;;EAKAN,QAAA,CAAAQ,SAAA,CAAAC,GAAG,GAAH,UAAIL,KAAK;IACP,IAAI,CAACC,SAAS,GAAG,IAAI;IACrB,IAAI,CAACE,MAAM,GAAGH,KAAK;IACnB,IAAMM,QAAQ,GAAG,IAAI,CAACP,UAAU,CAACQ,KAAK,EAAE;IACxC,IAAID,QAAQ,EAAE;MACZA,QAAQ,CAACE,OAAO,CAACR,KAAK,CAAC;;IAEzB,OAAO,IAAI;EACb,CAAC;EAED;;;;EAIAJ,QAAA,CAAAQ,SAAA,CAAAK,IAAI,GAAJ;IAAA,IAAAC,KAAA;IACE,IAAI,IAAI,CAACT,SAAS,IAAI,CAAC,IAAI,CAACF,UAAU,CAACY,MAAM,EAAE;MAC7C,IAAI,CAACV,SAAS,GAAG,KAAK;MACtB,OAAOW,OAAO,CAACJ,OAAO,CAAC,IAAI,CAACL,MAAM,CAAC;;IAErC,IAAMG,QAAQ,GAAGZ,KAAK,EAAE;IACxB,IAAI,CAACK,UAAU,CAACc,IAAI,CAACP,QAAQ,CAAC;IAC9B,OAAOA,QAAQ,CAACQ,OAAO,CAACC,IAAI,CAAC,UAAAf,KAAK;MAChCU,KAAI,CAACT,SAAS,GAAG,KAAK;MACtB,OAAOD,KAAK;IACd,CAAC,CAAC;EACJ,CAAC;EACH,OAAAJ,QAAC;AAAD,CAAC,CAnDD;AAqDAoB,MAAM,CAACC,OAAO,GAAGrB,QAAQ"},"metadata":{},"sourceType":"script","externalDependencies":[]}