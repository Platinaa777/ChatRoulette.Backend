{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.syntheticAudio = void 0;\nfunction syntheticAudio() {\n  // NOTE(mpatwardhan): We have to delay require-ing AudioContextFactory, because\n  // it exports a default instance whose constructor calls Object.assign.\n  var audioContextFactory = require('../webaudio/audiocontext');\n  var holder = {};\n  var audioContext = audioContextFactory.getOrCreate(holder);\n  var oscillator = audioContext.createOscillator();\n  var dst = oscillator.connect(audioContext.createMediaStreamDestination());\n  oscillator.start();\n  var track = dst.stream.getAudioTracks()[0];\n  var originalStop = track.stop;\n  track.stop = function () {\n    originalStop.call(track);\n    audioContextFactory.release(holder);\n  };\n  return track;\n}\nexports.syntheticAudio = syntheticAudio;","map":{"version":3,"names":["syntheticAudio","audioContextFactory","require","holder","audioContext","getOrCreate","oscillator","createOscillator","dst","connect","createMediaStreamDestination","start","track","stream","getAudioTracks","originalStop","stop","call","release","exports"],"sources":["/home/denis/RiderProjects/ChatRoulette/WebUI/chat-app/node_modules/twilio-video/lib/preflight/syntheticaudio.ts"],"sourcesContent":["interface MediaStreamAudioDestinationNode extends AudioNode {\n  stream: MediaStream;\n}\n\nexport function syntheticAudio(): MediaStreamTrack {\n  // NOTE(mpatwardhan): We have to delay require-ing AudioContextFactory, because\n  // it exports a default instance whose constructor calls Object.assign.\n  const audioContextFactory = require('../webaudio/audiocontext');\n  const holder = {};\n  const audioContext = audioContextFactory.getOrCreate(holder);\n  const oscillator = audioContext.createOscillator();\n  const dst = oscillator.connect(audioContext.createMediaStreamDestination()) as MediaStreamAudioDestinationNode;\n  oscillator.start();\n  const track = dst.stream.getAudioTracks()[0];\n  const originalStop = track.stop;\n  track.stop = () => {\n    originalStop.call(track);\n    audioContextFactory.release(holder);\n  };\n  return track;\n}\n"],"mappings":";;;;;;AAIA,SAAgBA,cAAcA,CAAA;EAC5B;EACA;EACA,IAAMC,mBAAmB,GAAGC,OAAO,CAAC,0BAA0B,CAAC;EAC/D,IAAMC,MAAM,GAAG,EAAE;EACjB,IAAMC,YAAY,GAAGH,mBAAmB,CAACI,WAAW,CAACF,MAAM,CAAC;EAC5D,IAAMG,UAAU,GAAGF,YAAY,CAACG,gBAAgB,EAAE;EAClD,IAAMC,GAAG,GAAGF,UAAU,CAACG,OAAO,CAACL,YAAY,CAACM,4BAA4B,EAAE,CAAoC;EAC9GJ,UAAU,CAACK,KAAK,EAAE;EAClB,IAAMC,KAAK,GAAGJ,GAAG,CAACK,MAAM,CAACC,cAAc,EAAE,CAAC,CAAC,CAAC;EAC5C,IAAMC,YAAY,GAAGH,KAAK,CAACI,IAAI;EAC/BJ,KAAK,CAACI,IAAI,GAAG;IACXD,YAAY,CAACE,IAAI,CAACL,KAAK,CAAC;IACxBX,mBAAmB,CAACiB,OAAO,CAACf,MAAM,CAAC;EACrC,CAAC;EACD,OAAOS,KAAK;AACd;AAhBAO,OAAA,CAAAnB,cAAA,GAAAA,cAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}