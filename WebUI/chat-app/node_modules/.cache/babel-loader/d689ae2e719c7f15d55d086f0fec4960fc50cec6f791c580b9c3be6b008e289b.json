{"ast":null,"code":"/* eslint callback-return:0 */\n'use strict';\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar MediaSignaling = require('./mediasignaling');\nvar messageId = 1;\nvar PublisherHintsSignaling = /** @class */function (_super) {\n  __extends(PublisherHintsSignaling, _super);\n  /**\n   * Construct a {@link RenderHintsSignaling}.\n   */\n  function PublisherHintsSignaling(getReceiver, options) {\n    var _this = _super.call(this, getReceiver, 'publisher_hints', options) || this;\n    _this.on('ready', function (transport) {\n      _this._log.debug('publisher_hints transport ready:', transport);\n      transport.on('message', function (message) {\n        _this._log.debug('Incoming: ', message);\n        switch (message.type) {\n          case 'publisher_hints':\n            if (message.publisher && message.publisher.hints && message.publisher.id) {\n              _this._processPublisherHints(message.publisher.hints, message.publisher.id);\n            }\n            break;\n          default:\n            _this._log.warn('Unknown message type: ', message.type);\n            break;\n        }\n      });\n    });\n    return _this;\n  }\n  PublisherHintsSignaling.prototype.sendTrackReplaced = function (_a) {\n    var trackSid = _a.trackSid;\n    if (!this._transport) {\n      return;\n    }\n    var payLoad = {\n      type: 'client_reset',\n      track: trackSid,\n      id: messageId++\n    };\n    this._log.debug('Outgoing: ', payLoad);\n    this._transport.publish(payLoad);\n  };\n  PublisherHintsSignaling.prototype.sendHintResponse = function (_a) {\n    var id = _a.id,\n      hints = _a.hints;\n    if (!this._transport) {\n      return;\n    }\n    var payLoad = {\n      type: 'publisher_hints',\n      id: id,\n      hints: hints\n    };\n    this._log.debug('Outgoing: ', payLoad);\n    this._transport.publish(payLoad);\n  };\n  /**\n   * @private\n   */\n  PublisherHintsSignaling.prototype._processPublisherHints = function (hints, id) {\n    try {\n      this.emit('updated', hints, id);\n    } catch (ex) {\n      this._log.error('error processing hints:', ex);\n    }\n  };\n  return PublisherHintsSignaling;\n}(MediaSignaling);\nmodule.exports = PublisherHintsSignaling;","map":{"version":3,"names":["MediaSignaling","require","messageId","PublisherHintsSignaling","_super","__extends","getReceiver","options","_this","call","on","transport","_log","debug","message","type","publisher","hints","id","_processPublisherHints","warn","prototype","sendTrackReplaced","_a","trackSid","_transport","payLoad","track","publish","sendHintResponse","emit","ex","error","module","exports"],"sources":["/home/denis/RiderProjects/ChatRoulette/WebUI/chat-app/node_modules/twilio-video/lib/signaling/v2/publisherhintsignaling.js"],"sourcesContent":["/* eslint callback-return:0 */\n'use strict';\n\nconst MediaSignaling = require('./mediasignaling');\n\nlet messageId = 1;\nclass PublisherHintsSignaling extends MediaSignaling {\n  /**\n   * Construct a {@link RenderHintsSignaling}.\n   */\n  constructor(getReceiver, options) {\n    super(getReceiver, 'publisher_hints', options);\n    this.on('ready', transport => {\n      this._log.debug('publisher_hints transport ready:', transport);\n      transport.on('message', message => {\n        this._log.debug('Incoming: ', message);\n        switch (message.type) {\n          case 'publisher_hints':\n            if (message.publisher && message.publisher.hints && message.publisher.id) {\n              this._processPublisherHints(message.publisher.hints, message.publisher.id);\n            }\n            break;\n          default:\n            this._log.warn('Unknown message type: ', message.type);\n            break;\n        }\n      });\n    });\n  }\n\n  sendTrackReplaced({ trackSid }) {\n    if (!this._transport) {\n      return;\n    }\n\n    const payLoad = {\n      type: 'client_reset',\n      track: trackSid,\n      id: messageId++\n    };\n    this._log.debug('Outgoing: ', payLoad);\n    this._transport.publish(payLoad);\n  }\n\n  sendHintResponse({ id, hints }) {\n    if (!this._transport) {\n      return;\n    }\n    const payLoad = {\n      type: 'publisher_hints',\n      id,\n      hints\n    };\n    this._log.debug('Outgoing: ', payLoad);\n    this._transport.publish(payLoad);\n  }\n\n  /**\n   * @private\n   */\n  _processPublisherHints(hints, id) {\n    try {\n      this.emit('updated', hints, id);\n    } catch (ex) {\n      this._log.error('error processing hints:', ex);\n    }\n  }\n}\n\n\nmodule.exports = PublisherHintsSignaling;\n"],"mappings":"AAAA;AACA,YAAY;;;;;;;;;;;;;;;;;;;;;;AAEZ,IAAMA,cAAc,GAAGC,OAAO,CAAC,kBAAkB,CAAC;AAElD,IAAIC,SAAS,GAAG,CAAC;AACjB,IAAAC,uBAAA,0BAAAC,MAAA;EAAsCC,SAAA,CAAAF,uBAAA,EAAAC,MAAA;EACpC;;;EAGA,SAAAD,wBAAYG,WAAW,EAAEC,OAAO;IAAhC,IAAAC,KAAA,GACEJ,MAAA,CAAAK,IAAA,OAAMH,WAAW,EAAE,iBAAiB,EAAEC,OAAO,CAAC;IAC9CC,KAAI,CAACE,EAAE,CAAC,OAAO,EAAE,UAAAC,SAAS;MACxBH,KAAI,CAACI,IAAI,CAACC,KAAK,CAAC,kCAAkC,EAAEF,SAAS,CAAC;MAC9DA,SAAS,CAACD,EAAE,CAAC,SAAS,EAAE,UAAAI,OAAO;QAC7BN,KAAI,CAACI,IAAI,CAACC,KAAK,CAAC,YAAY,EAAEC,OAAO,CAAC;QACtC,QAAQA,OAAO,CAACC,IAAI;UAClB,KAAK,iBAAiB;YACpB,IAAID,OAAO,CAACE,SAAS,IAAIF,OAAO,CAACE,SAAS,CAACC,KAAK,IAAIH,OAAO,CAACE,SAAS,CAACE,EAAE,EAAE;cACxEV,KAAI,CAACW,sBAAsB,CAACL,OAAO,CAACE,SAAS,CAACC,KAAK,EAAEH,OAAO,CAACE,SAAS,CAACE,EAAE,CAAC;;YAE5E;UACF;YACEV,KAAI,CAACI,IAAI,CAACQ,IAAI,CAAC,wBAAwB,EAAEN,OAAO,CAACC,IAAI,CAAC;YACtD;;MAEN,CAAC,CAAC;IACJ,CAAC,CAAC;;EACJ;EAEAZ,uBAAA,CAAAkB,SAAA,CAAAC,iBAAiB,GAAjB,UAAkBC,EAAY;QAAVC,QAAQ,GAAAD,EAAA,CAAAC,QAAA;IAC1B,IAAI,CAAC,IAAI,CAACC,UAAU,EAAE;MACpB;;IAGF,IAAMC,OAAO,GAAG;MACdX,IAAI,EAAE,cAAc;MACpBY,KAAK,EAAEH,QAAQ;MACfN,EAAE,EAAEhB,SAAS;KACd;IACD,IAAI,CAACU,IAAI,CAACC,KAAK,CAAC,YAAY,EAAEa,OAAO,CAAC;IACtC,IAAI,CAACD,UAAU,CAACG,OAAO,CAACF,OAAO,CAAC;EAClC,CAAC;EAEDvB,uBAAA,CAAAkB,SAAA,CAAAQ,gBAAgB,GAAhB,UAAiBN,EAAa;QAAXL,EAAE,GAAAK,EAAA,CAAAL,EAAA;MAAED,KAAK,GAAAM,EAAA,CAAAN,KAAA;IAC1B,IAAI,CAAC,IAAI,CAACQ,UAAU,EAAE;MACpB;;IAEF,IAAMC,OAAO,GAAG;MACdX,IAAI,EAAE,iBAAiB;MACvBG,EAAE,EAAAA,EAAA;MACFD,KAAK,EAAAA;KACN;IACD,IAAI,CAACL,IAAI,CAACC,KAAK,CAAC,YAAY,EAAEa,OAAO,CAAC;IACtC,IAAI,CAACD,UAAU,CAACG,OAAO,CAACF,OAAO,CAAC;EAClC,CAAC;EAED;;;EAGAvB,uBAAA,CAAAkB,SAAA,CAAAF,sBAAsB,GAAtB,UAAuBF,KAAK,EAAEC,EAAE;IAC9B,IAAI;MACF,IAAI,CAACY,IAAI,CAAC,SAAS,EAAEb,KAAK,EAAEC,EAAE,CAAC;KAChC,CAAC,OAAOa,EAAE,EAAE;MACX,IAAI,CAACnB,IAAI,CAACoB,KAAK,CAAC,yBAAyB,EAAED,EAAE,CAAC;;EAElD,CAAC;EACH,OAAA5B,uBAAC;AAAD,CAAC,CA7DqCH,cAAc;AAgEpDiC,MAAM,CAACC,OAAO,GAAG/B,uBAAuB"},"metadata":{},"sourceType":"script","externalDependencies":[]}